import{n as Q,p as W,c as P,q as Y,s as Z,A as ee,x as N,d as J,o as C,i as M,w as s,B as j,e as l,f as a,t as c,h as e,g as t,_ as $,y as z,z as v,l as I,C as A,E as F,k as V,j as K,S as O,D as q,r as L,b as X,F as G,m as te}from"./index-b9rVHk3c.js";import{T as d}from"./index-8u8Y7XR0.js";import{_ as w}from"./FormLabel.vue_vue_type_script_setup_true_lang-SlbvcGm7.js";import{_ as H}from"./FormDatepicker.vue_vue_type_script_setup_true_lang-A198NyF7.js";import{u as se}from"./useUser-_6MRtQx7.js";function le(y){const p=Q({name:"1",email:"111",password:"",employeeId:"123",workStatus:"在職",onboardDate:"2024-03-29",resignationDate:"",identity:"員工",salaryType:"月薪",isEmployeeRetirementPercentage:!1,companyIds:["1","2"],enabledModules:[]}),{name:g,email:_,password:f,employeeId:k,workStatus:m,onboardDate:b,resignationDate:i,identity:r,salaryType:h,isEmployeeRetirementPercentage:T,companyIds:S,enabledModules:D}=W(p),R=P(()=>!!y);Y(()=>{const E={};if(y){const U={...y,...E};Object.keys(p).forEach(u=>{U[u]!==void 0&&(p[u]=U[u])})}});const x=P(()=>g.value!==""&&(_==null?void 0:_.value)!==""&&k.value!==""&&m.value!==""&&b.value!==""&&r.value!==""&&h.value!=="");return{name:g,email:_,password:f,employeeId:k,workStatus:m,onboardDate:b,resignationDate:i,identity:r,salaryType:h,isEmployeeRetirementPercentage:T,companyIds:S,enabledModules:D,canSubmit:x,isEdit:R,submit:async(E,U)=>{const u=E?"update":"create";console.log(u),await{create:()=>N.post("/user",{...p}),update:()=>N.put(`/user/${y.id}`,{...p,id:y.id})}[u](),Z().showSaveSuccess(),U(),ee().fetchUsers()}}}const ae=l("div",{class:"text-gray my-4 bg-orange-300 p-2 text-center text-lg font-bold text-white"}," 基本資料 ",-1),oe={class:"mb-4 flex items-center"},de={class:"mb-4 flex items-center"},ne={class:"mb-4 flex items-center"},re={class:"mb-4 flex items-center"},ie={class:"mb-4 flex items-center"},ue=l("option",{value:"在職"},"在職",-1),me=l("option",{value:"留職停薪"},"留職停薪",-1),ce=l("option",{value:"離職"},"離職",-1),pe={class:"mb-4 flex items-center"},_e={class:"mb-4 flex items-center"},fe=l("div",{class:"text-gray my-4 bg-orange-300 p-2 text-center text-lg font-bold text-white"}," 薪資資料 ",-1),be={class:"mb-4 flex items-center"},xe=l("option",{value:"員工"},"員工",-1),ve=l("option",{value:"雇主"},"雇主",-1),we={class:"mb-4 flex items-center"},he=l("option",{value:"月薪"},"月薪",-1),ye=l("option",{value:"時薪"},"時薪",-1),ge={class:"mb-4 flex items-center"},ke={class:"flex justify-center"},$e=J({__name:"CreateUserModal",props:{subAccount:{},idx:{}},emits:["close"],setup(y,{emit:p}){const g=p,{subAccount:_}=y,{email:f,name:k,password:m,employeeId:b,workStatus:i,onboardDate:r,resignationDate:h,identity:T,salaryType:S,isEmployeeRetirementPercentage:D,canSubmit:R,isEdit:x,submit:B}=le(_),E=P(()=>x.value?O:q),U=P(()=>x.value?O.Panel:q.Panel);return(u,o)=>(C(),M(j(E.value),{open:!0,size:"md"},{default:s(()=>[(C(),M(j(U.value),{class:"p-4 md:w-[600px]"},{default:s(()=>[l("div",{class:z(["relative mb-5",e(x)?"text-primary":"text-center text-xl"])},[a(c(e(x)?u.$t("user-edit-model-title")+(u.idx+1):u.$t("user-create-model-title"))+" ",1),t(e($),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>g("close"))})],2),l("div",null,[ae,l("div",oe,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("姓名")]),_:1}),t(e(I),{class:"flex-1",type:"text",placeholder:"請輸入姓名",modelValue:e(k),"onUpdate:modelValue":o[1]||(o[1]=n=>v(k)?k.value=n:null)},null,8,["modelValue"])]),l("div",de,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("Email")]),_:1}),t(e(I),{class:"flex-1",type:"text",placeholder:"請輸入Email",modelValue:e(f),"onUpdate:modelValue":o[2]||(o[2]=n=>v(f)?f.value=n:null)},null,8,["modelValue"])]),l("div",ne,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("登入密碼")]),_:1}),t(e(I),{class:"flex-1",type:"password",placeholder:u.$t("error-message36"),modelValue:e(m),"onUpdate:modelValue":o[3]||(o[3]=n=>v(m)?m.value=n:null)},null,8,["placeholder","modelValue"])]),l("div",re,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("員工編號 *")]),_:1}),t(e(I),{class:"flex-1",type:"text",placeholder:"請輸入員工編號",modelValue:e(b),"onUpdate:modelValue":o[4]||(o[4]=n=>v(b)?b.value=n:null)},null,8,["modelValue"])]),l("div",ie,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("在職狀態 *")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(i),"onUpdate:modelValue":o[5]||(o[5]=n=>v(i)?i.value=n:null)},{default:s(()=>[ue,me,ce]),_:1},8,["modelValue"])]),l("div",pe,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("到職日期 *")]),_:1}),t(e(H),{class:"flex-1",type:"text",placeholder:"請輸入到職日期",modelValue:e(r),"onUpdate:modelValue":o[6]||(o[6]=n=>v(r)?r.value=n:null),"auto-apply":""},null,8,["modelValue"])]),l("div",_e,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("離職日期")]),_:1}),t(e(H),{class:"flex-1",type:"text",placeholder:"請輸入離職日期",modelValue:e(h),"onUpdate:modelValue":o[7]||(o[7]=n=>v(h)?h.value=n:null),"auto-apply":""},null,8,["modelValue"])])]),l("div",null,[fe,l("div",be,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("身份別 *")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(T),"onUpdate:modelValue":o[8]||(o[8]=n=>v(T)?T.value=n:null)},{default:s(()=>[xe,ve]),_:1},8,["modelValue"])]),l("div",we,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("計薪方式 *")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(S),"onUpdate:modelValue":o[9]||(o[9]=n=>v(S)?S.value=n:null)},{default:s(()=>[he,ye]),_:1},8,["modelValue"])]),l("div",ge,[t(e(w),{class:"w-[120px]"},{default:s(()=>[a("是否自提")]),_:1}),t(e(F),null,{default:s(()=>[t(e(F).Input,{id:"isEmployeeRetirementPercentage-checkbox",type:"checkbox",modelValue:e(D),"onUpdate:modelValue":o[10]||(o[10]=n=>v(D)?D.value=n:null),value:20},null,8,["modelValue"])]),_:1})])]),l("div",ke,[e(x)?(C(),M(e(V),{key:0,variant:"outline-primary",onClick:o[11]||(o[11]=()=>g("close"))},{default:s(()=>[a(c(u.$t("cancel-btn")),1)]),_:1})):K("",!0),t(e(V),{class:z({"flex-1":!e(x),"ml-3":e(x)}),disabled:!e(R),variant:"primary",onClick:o[12]||(o[12]=()=>e(B)(e(x),()=>g("close")))},{default:s(()=>[a(c(u.$t("save-btn")),1)]),_:1},8,["class","disabled"])])]),_:1}))]),_:1}))}}),Ve={class:"mt-5 grid grid-cols-12 gap-6"},Te={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},Ce={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Ue={class:"relative text-slate-500"},Se={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},De={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Ee={class:"relative text-slate-500"},Ie={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Me={class:"relative text-slate-500"},Pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Re={class:"relative text-slate-500"},Ae={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Be={class:"relative text-slate-500"},Ne={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},je={class:"font-medium"},ze={class:"font-medium"},Fe={class:"font-medium"},Oe={class:"font-medium"},qe={class:"font-medium"},Le={class:"font-medium"},Xe={class:"font-medium"},Ge={class:"font-medium"},He={class:"flex items-center justify-center"},Ze=J({__name:"User",setup(y){const{users:p,confirmDeleteUser:g}=se(),_=L(!1),f=L(-1),k=P(()=>p.value[f.value]||null),m=b=>{f.value=-1,b!==void 0&&(f.value=b),_.value=!0};return(b,i)=>(C(),X(G,null,[l("div",Ve,[l("div",Te,[l("div",Ce,[l("div",Ue,[t(e(I),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e($),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])]),l("div",Se,[l("div",De,[l("div",Ee,[t(e(V),{variant:"primary",type:"button",class:"m-3",onClick:i[0]||(i[0]=()=>m())},{default:s(()=>[t(e($),{icon:"Plus",class:"mr-1 h-4 w-4"}),a(" 新增員工 ")]),_:1})])]),l("div",Ie,[l("div",Me,[t(e(V),{variant:"danger",type:"button",class:"m-3",onClick:i[1]||(i[1]=()=>m()),disabled:""},{default:s(()=>[t(e($),{icon:"Download",class:"mr-1 h-4 w-4"}),a(" 員工資料範例 ")]),_:1})])]),l("div",Pe,[l("div",Re,[t(e(V),{variant:"primary",type:"button",class:"m-3",onClick:i[2]||(i[2]=()=>m()),disabled:""},{default:s(()=>[t(e($),{icon:"Upload",class:"mr-1 h-4 w-4"}),a(" 匯入員工資料 ")]),_:1})])]),l("div",Ae,[l("div",Be,[t(e(V),{variant:"primary",type:"button",class:"m-3",onClick:i[3]||(i[3]=()=>m()),disabled:""},{default:s(()=>[t(e($),{icon:"Download",class:"mr-1 h-4 w-4"}),a(" 匯出員工資料 ")]),_:1})])])]),l("div",Ne,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(d).Thead,null,{default:s(()=>[t(e(d).Tr,null,{default:s(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("員工編號")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("姓名")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("Email")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("到職日")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("離職日")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("在職狀態")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("計薪方式")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("更新日期")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:s(()=>[(C(!0),X(G,null,te(e(p),(r,h)=>(C(),M(e(d).Tr,{key:h,class:"intro-x"},{default:s(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",je,c(r.id),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",ze,c(r.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Fe,c(r.email),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Oe,c(r.onboardDate),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",qe,c(r.resignationDate),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Le,c(r.workStatus),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Xe,c(r.salaryType),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ge,c(r.updatedAt),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[l("div",He,[t(e(V),{variant:"primary",type:"button",class:"m-3 w-20",onClick:T=>m(h)},{default:s(()=>[t(e($),{icon:"Edit",class:"mr-1 h-4 w-4"}),a(" 修改 ")]),_:2},1032,["onClick"]),t(e(V),{variant:"danger",type:"button",class:"m-3 w-20",onClick:T=>e(g)(r.id)},{default:s(()=>[t(e($),{icon:"Trash",class:"mr-1 h-4 w-4"}),a(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_.value?(C(),M(e($e),{key:0,onClose:i[4]||(i[4]=r=>_.value=!1),company:k.value,idx:f.value},null,8,["company","idx"])):K("",!0)],64))}});export{Ze as default};
