import{T as d}from"./index-8u8Y7XR0.js";import{n as O,p as q,c as I,q as A,s as K,O as N,x as L,d as P,o as C,i as U,w as s,g as t,e as a,f as l,t as w,h as e,_ as y,C as B,z as E,b as D,m as R,F as z,l as $,k as S,D as j,K as X,L as G,r as M,j as H}from"./index-b9rVHk3c.js";import{_ as T}from"./FormLabel.vue_vue_type_script_setup_true_lang-SlbvcGm7.js";import{_ as J}from"./FormDatepicker.vue_vue_type_script_setup_true_lang-A198NyF7.js";import{u as Q}from"./useUser-_6MRtQx7.js";function W(p){const u=O({companyId:"1",userId:"1",type:"PLUS",name:"",description:"",amount:0,yearMonth:""}),{companyId:f,userId:x,type:_,name:i,description:b,amount:v,yearMonth:h}=q(u),k=I(()=>!!p);A(()=>{const c={};if(p){const m={...p,...c};Object.keys(u).forEach(n=>{m[n]!==void 0&&(u[n]=m[n])})}});const g=I(()=>x.value!==""&&_.value!==""&&i.value!==""&&v.value.toString()!==""&&h.value!=="");return{companyId:f,userId:x,type:_,name:i,description:b,amount:v,yearMonth:h,canSubmit:g,isEdit:k,submit:async(c,m)=>{const n=c?"update":"create";console.log(n),await{create:()=>L.post("/salary/salary-extend",{...u}),update:()=>L.patch(`/salary/salary-extend/${p.id}`,{...u,id:p.id})}[n](),K().showSaveSuccess(),m(),N().fetchSalaryExtendList({companyId:"1",page:1})}}}const Y={class:"relative mb-5 text-center text-xl"},Z={class:"mb-4 flex items-center"},ee=["value"],te={class:"mb-4 flex items-center"},se={class:"mb-4 flex items-center"},ae={class:"mb-4 flex items-center"},le={class:"mb-4 flex items-center"},oe=a("option",{value:"PLUS"},"加項",-1),de=a("option",{value:"REDUCE"},"減項",-1),ne={class:"mb-4 flex items-center"},re={class:"flex justify-center"},ie=P({__name:"CreateSalaryExtendModal",props:{salaryExtend:{},idx:{}},emits:["close"],setup(p,{emit:u}){const{users:f}=Q(),x=u,{salaryExtend:_}=p,{userId:i,name:b,description:v,type:h,amount:k,yearMonth:g,canSubmit:V,isEdit:c,submit:m}=W(_);return(n,o)=>(C(),U(e(j),{open:!0,size:"md"},{default:s(()=>[t(e(j).Panel,{class:"p-4 md:w-[600px]"},{default:s(()=>[a("div",Y,[l(w(e(c)?"編輯科別加減項"+(n.idx+1):"新增科別加減項")+" ",1),t(e(y),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>x("close"))})]),a("section",null,[a("div",Z,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("選擇員工 *")]),_:1}),t(e(B),{class:"flex-1",type:"text",modelValue:e(i),"onUpdate:modelValue":o[1]||(o[1]=r=>E(i)?i.value=r:null)},{default:s(()=>[(C(!0),D(z,null,R(e(f),(r,F)=>(C(),D("option",{key:F,value:r.id},w(r.name),9,ee))),128))]),_:1},8,["modelValue"])]),a("div",te,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("薪資年月 *")]),_:1}),t(e(J),{class:"flex-1",modelValue:e(g),"onUpdate:modelValue":o[2]||(o[2]=r=>E(g)?g.value=r:null),"month-picker":"","auto-apply":""},null,8,["modelValue"])]),a("div",se,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("薪資科目 *")]),_:1}),t(e($),{class:"flex-1",type:"text",modelValue:e(b),"onUpdate:modelValue":o[3]||(o[3]=r=>E(b)?b.value=r:null)},null,8,["modelValue"])]),a("div",ae,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("金額 *")]),_:1}),t(e($),{class:"flex-1",type:"number",modelValue:e(k),"onUpdate:modelValue":o[4]||(o[4]=r=>E(k)?k.value=r:null)},null,8,["modelValue"])]),a("div",le,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("加減項 *")]),_:1}),t(e(B),{class:"flex-1",type:"text",modelValue:e(h),"onUpdate:modelValue":o[5]||(o[5]=r=>E(h)?h.value=r:null)},{default:s(()=>[oe,de]),_:1},8,["modelValue"])]),a("div",ne,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("備註")]),_:1}),t(e($),{class:"flex-1",type:"text",modelValue:e(v),"onUpdate:modelValue":o[6]||(o[6]=r=>E(v)?v.value=r:null)},null,8,["modelValue"])]),a("div",re,[t(e(S),{class:"mr-2 flex-1",variant:"primary",onClick:o[7]||(o[7]=()=>e(m)(e(c),()=>x("close"))),disabled:!e(V)},{default:s(()=>[l(w(e(c)?"儲存":"新增"),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}});function ce(p){const u=N(),{fetchSalaryExtendList:f}=u,x=I(()=>u.salaryExtend),_=(i,b)=>{X().showModal({deleteType:"salaryExtend",title:G.global.t("delete-alert-title"),content:"確定要刪除這筆資料嗎？刪除後無法復原，需要重新新增",deleteData:{companyId:i,id:b}})};return f({companyId:p,page:1}),{salaryExtendList:x,confirmDeleteSalaryExtend:_,fetchSalaryExtendList:f}}const ue={class:"flex justify-between"},me={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},_e={class:"relative text-slate-500"},fe={class:"mt-5 grid grid-cols-12 gap-6"},xe={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},be={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ve={class:"relative text-slate-500"},we={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},he={class:"relative text-slate-500"},ye={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ke={class:"relative text-slate-500"},ge={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Se={class:"relative text-slate-500"},Ce={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},Ee={class:"font-medium"},Te={class:"font-medium"},Ve={class:"font-medium"},$e={class:"font-medium"},Ie={class:"font-medium"},De={class:"font-medium"},Me={class:"flex items-center justify-center"},Pe=P({__name:"SalaryExtendPage",setup(p){const u=M(1),{salaryExtendList:f,confirmDeleteSalaryExtend:x}=ce("1"),_=M(!1),i=M(-1),b=I(()=>f.value[i.value]||null),v=c=>{i.value=-1,c!==void 0&&(i.value=c),_.value=!0},h=()=>{console.log("onExportSalaryExtendClick")},k=()=>{console.log("onImportButtonClick")},g=()=>{console.log("onDownloadImportExampleClick")},V=c=>{x(u.value,c)};return(c,m)=>(C(),D("div",null,[a("div",ue,[a("div",me,[a("div",pe,[a("div",_e,[t(e($),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(y),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),a("div",fe,[a("div",xe,[a("div",be,[a("div",ve,[t(e(S),{variant:"primary",type:"button",class:"m-3",onClick:m[0]||(m[0]=n=>v())},{default:s(()=>[t(e(y),{icon:"Plus",class:"mr-1 h-4 w-4"}),l(" 新增薪資加減項 ")]),_:1})])]),a("div",we,[a("div",he,[t(e(S),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:k},{default:s(()=>[t(e(y),{icon:"Upload",class:"mr-1 h-4 w-4"}),l(" 匯入薪資加減項 ")]),_:1})])]),a("div",ye,[a("div",ke,[t(e(S),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:h},{default:s(()=>[t(e(y),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 匯出薪資加減項 ")]),_:1})])]),a("div",ge,[a("div",Se,[t(e(S),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:g},{default:s(()=>[t(e(y),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 薪資加減項匯入範例 ")]),_:1})])])]),a("div",Ce,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(d).Thead,null,{default:s(()=>[t(e(d).Tr,null,{default:s(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l(" 員工編號 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("姓名")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l(" 薪資年月 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("薪資科目")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("金額")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("加減項")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:s(()=>[(C(!0),D(z,null,R(e(f),(n,o)=>(C(),U(e(d).Tr,{key:o,class:"intro-x"},{default:s(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",Ee,w(n.employeeId),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",Te,w(n.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",Ve,w(n.yearMonth),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",$e,w(n.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",Ie,w(n.amount),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",De,w(n.type),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[a("div",Me,[t(e(S),{variant:"primary",type:"button",class:"m-3 w-20",onClick:r=>v(o)},{default:s(()=>[t(e(y),{icon:"Edit",class:"mr-1 h-4 w-4"}),l(" 修改 ")]),_:2},1032,["onClick"]),t(e(S),{variant:"danger",type:"button",class:"m-3 w-20",onClick:r=>V(n.id)},{default:s(()=>[t(e(y),{icon:"Trash",class:"mr-1 h-4 w-4"}),l(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_.value?(C(),U(e(ie),{key:0,salaryExtend:b.value,onClose:m[1]||(m[1]=n=>_.value=!1),idx:i.value},null,8,["salaryExtend","idx"])):H("",!0)]))}});export{Pe as default};
