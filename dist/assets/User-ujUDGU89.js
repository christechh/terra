import{m as Y,n as Z,c as S,p as ee,q as te,B as K,v as j,d as Q,o as C,g as P,w as s,C as z,e as l,j as a,t as b,u as e,f as t,i as $,x as F,y,k as I,E as L,_ as V,h as W,S as O,D as q,z as se,A as B,G as le,r as G,b as X,F as H,l as ae}from"./index-vk3c6tow.js";import{T as d}from"./index-XLNbcZof.js";import{_ as g}from"./FormLabel.vue_vue_type_script_setup_true_lang-QnAjKaHQ.js";import{_ as A}from"./FormSelect.vue_vue_type_script_setup_true_lang-RAE3O8nS.js";import{_ as J}from"./FormDatepicker.vue_vue_type_script_setup_true_lang-X-BrE-EJ.js";function oe(_){const u=Y({name:"1",email:"111",password:"",employeeId:"123",workStatus:"在職",onboardDate:"2024-03-29",resignationDate:"",identity:"員工",salaryType:"月薪",isEmployeeRetirementPercentage:!1,companyIds:["1","2"],enabledModules:[]}),{name:x,email:m,password:p,employeeId:v,workStatus:f,onboardDate:w,resignationDate:i,identity:r,salaryType:k,isEmployeeRetirementPercentage:T,companyIds:D,enabledModules:E}=Z(u),R=S(()=>!!_);ee(()=>{const M={};if(_){const U={..._,...M};Object.keys(u).forEach(c=>{U[c]!==void 0&&(u[c]=U[c])})}});const h=S(()=>x.value!==""&&(m==null?void 0:m.value)!==""&&v.value!==""&&f.value!==""&&w.value!==""&&r.value!==""&&k.value!=="");return{name:x,email:m,password:p,employeeId:v,workStatus:f,onboardDate:w,resignationDate:i,identity:r,salaryType:k,isEmployeeRetirementPercentage:T,companyIds:D,enabledModules:E,canSubmit:h,isEdit:R,submit:async(M,U)=>{const c=M?"update":"create";console.log(c),await{create:()=>j.post("/user",{...u}),update:()=>j.put(`/user/${_.id}`,{...u,id:_.id})}[c](),te().showSaveSuccess(),U(),K().fetchUsers()}}}const de=l("div",{class:"text-gray my-4 bg-orange-300 p-2 text-center text-lg font-bold text-white"}," 基本資料 ",-1),ne={class:"mb-4 flex items-center"},re={class:"mb-4 flex items-center"},ie={class:"mb-4 flex items-center"},ue={class:"mb-4 flex items-center"},ce={class:"mb-4 flex items-center"},me=l("option",{value:"在職"},"在職",-1),pe=l("option",{value:"留職停薪"},"留職停薪",-1),fe=l("option",{value:"離職"},"離職",-1),_e={class:"mb-4 flex items-center"},be={class:"mb-4 flex items-center"},xe=l("div",{class:"text-gray my-4 bg-orange-300 p-2 text-center text-lg font-bold text-white"}," 薪資資料 ",-1),ve={class:"mb-4 flex items-center"},we=l("option",{value:"員工"},"員工",-1),he=l("option",{value:"雇主"},"雇主",-1),ye={class:"mb-4 flex items-center"},ge=l("option",{value:"月薪"},"月薪",-1),ke=l("option",{value:"時薪"},"時薪",-1),$e={class:"mb-4 flex items-center"},Ve={class:"flex justify-center"},Te=Q({__name:"CreateUserModal",props:{subAccount:{},idx:{}},emits:["close"],setup(_,{emit:u}){const x=u,{subAccount:m}=_,{email:p,name:v,password:f,employeeId:w,workStatus:i,onboardDate:r,resignationDate:k,identity:T,salaryType:D,isEmployeeRetirementPercentage:E,canSubmit:R,isEdit:h,submit:N}=oe(m),M=S(()=>h.value?O:q),U=S(()=>h.value?O.Panel:q.Panel);return(c,o)=>(C(),P(z(M.value),{open:!0,size:"md"},{default:s(()=>[(C(),P(z(U.value),{class:"p-4 md:w-[600px]"},{default:s(()=>[l("div",{class:F(["relative mb-5",e(h)?"text-primary":"text-center text-xl"])},[a(b(e(h)?c.$t("user-edit-model-title")+(c.idx+1):c.$t("user-create-model-title"))+" ",1),t(e($),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>x("close"))})],2),l("div",null,[de,l("div",ne,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("姓名")]),_:1}),t(e(I),{class:"flex-1",type:"text",placeholder:"請輸入姓名",modelValue:e(v),"onUpdate:modelValue":o[1]||(o[1]=n=>y(v)?v.value=n:null)},null,8,["modelValue"])]),l("div",re,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("Email")]),_:1}),t(e(I),{class:"flex-1",type:"text",placeholder:"請輸入Email",modelValue:e(p),"onUpdate:modelValue":o[2]||(o[2]=n=>y(p)?p.value=n:null)},null,8,["modelValue"])]),l("div",ie,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("登入密碼")]),_:1}),t(e(I),{class:"flex-1",type:"password",placeholder:c.$t("error-message36"),modelValue:e(f),"onUpdate:modelValue":o[3]||(o[3]=n=>y(f)?f.value=n:null)},null,8,["placeholder","modelValue"])]),l("div",ue,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("員工編號 *")]),_:1}),t(e(I),{class:"flex-1",type:"password",placeholder:"請輸入員工編號",modelValue:e(w),"onUpdate:modelValue":o[4]||(o[4]=n=>y(w)?w.value=n:null)},null,8,["modelValue"])]),l("div",ce,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("在職狀態 *")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(i),"onUpdate:modelValue":o[5]||(o[5]=n=>y(i)?i.value=n:null)},{default:s(()=>[me,pe,fe]),_:1},8,["modelValue"])]),l("div",_e,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("到職日期 *")]),_:1}),t(e(J),{class:"flex-1",type:"text",placeholder:"請輸入到職日期",modelValue:e(r),"onUpdate:modelValue":o[6]||(o[6]=n=>y(r)?r.value=n:null)},null,8,["modelValue"])]),l("div",be,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("離職日期")]),_:1}),t(e(J),{class:"flex-1",type:"text",placeholder:"請輸入離職日期",modelValue:e(k),"onUpdate:modelValue":o[7]||(o[7]=n=>y(k)?k.value=n:null)},null,8,["modelValue"])])]),l("div",null,[xe,l("div",ve,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("身份別 *")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(T),"onUpdate:modelValue":o[8]||(o[8]=n=>y(T)?T.value=n:null)},{default:s(()=>[we,he]),_:1},8,["modelValue"])]),l("div",ye,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("計薪方式 *")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(D),"onUpdate:modelValue":o[9]||(o[9]=n=>y(D)?D.value=n:null)},{default:s(()=>[ge,ke]),_:1},8,["modelValue"])]),l("div",$e,[t(e(g),{class:"w-[120px]"},{default:s(()=>[a("是否自提")]),_:1}),t(e(L),null,{default:s(()=>[t(e(L).Input,{id:"isEmployeeRetirementPercentage-checkbox",type:"checkbox",modelValue:e(E),"onUpdate:modelValue":o[10]||(o[10]=n=>y(E)?E.value=n:null),value:20},null,8,["modelValue"])]),_:1})])]),l("div",Ve,[e(h)?(C(),P(e(V),{key:0,variant:"outline-primary",onClick:o[11]||(o[11]=()=>x("close"))},{default:s(()=>[a(b(c.$t("cancel-btn")),1)]),_:1})):W("",!0),t(e(V),{class:F({"flex-1":!e(h),"ml-3":e(h)}),disabled:!e(R),variant:"primary",onClick:o[12]||(o[12]=()=>e(N)(e(h),()=>x("close")))},{default:s(()=>[a(b(c.$t("save-btn")),1)]),_:1},8,["class","disabled"])])]),_:1}))]),_:1}))}});function Ce(){const _=K(),{fetchUsers:u}=_,x=S(()=>_.users),m=v=>{se().showModal({deleteType:"user",title:B.global.t("delete-alert-title"),content:B.global.t("page-delete-check-desc"),deleteData:{id:v}})},p=()=>{le().showModal({title:B.global.t("新增成功"),content:B.global.t("是否要前往計算薪資？"),confirmButtonText:"前往計算薪資"})};return u(),{users:x,fetchUsers:u,confirmDeleteUser:m,confirmLinkSalary:p}}const Ue={class:"mt-5 grid grid-cols-12 gap-6"},Se={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},De={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Ee={class:"relative text-slate-500"},Me={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},Ie={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Pe={class:"relative text-slate-500"},Be={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Re={class:"relative text-slate-500"},Ae={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Ne={class:"relative text-slate-500"},je={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ze={class:"relative text-slate-500"},Fe={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},Le={class:"font-medium"},Oe={class:"font-medium"},qe={class:"font-medium"},Ge={class:"font-medium"},Xe={class:"font-medium"},He={class:"font-medium"},Je={class:"font-medium"},Ke={class:"font-medium"},Qe={class:"flex items-center justify-center"},st=Q({__name:"User",setup(_){const{users:u,confirmDeleteUser:x}=Ce(),m=G(!1),p=G(-1),v=S(()=>u.value[p.value]||null),f=w=>{p.value=-1,w!==void 0&&(p.value=w),m.value=!0};return(w,i)=>(C(),X(H,null,[l("div",Ue,[l("div",Se,[l("div",De,[l("div",Ee,[t(e(I),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e($),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])]),l("div",Me,[l("div",Ie,[l("div",Pe,[t(e(V),{variant:"primary",type:"button",class:"m-3",onClick:i[0]||(i[0]=()=>f())},{default:s(()=>[t(e($),{icon:"Plus",class:"mr-1 h-4 w-4"}),a(" 新增員工 ")]),_:1})])]),l("div",Be,[l("div",Re,[t(e(V),{variant:"danger",type:"button",class:"m-3",onClick:i[1]||(i[1]=()=>f()),disabled:""},{default:s(()=>[t(e($),{icon:"Download",class:"mr-1 h-4 w-4"}),a(" 員工資料範例 ")]),_:1})])]),l("div",Ae,[l("div",Ne,[t(e(V),{variant:"primary",type:"button",class:"m-3",onClick:i[2]||(i[2]=()=>f()),disabled:""},{default:s(()=>[t(e($),{icon:"Upload",class:"mr-1 h-4 w-4"}),a(" 匯入員工資料 ")]),_:1})])]),l("div",je,[l("div",ze,[t(e(V),{variant:"primary",type:"button",class:"m-3",onClick:i[3]||(i[3]=()=>f()),disabled:""},{default:s(()=>[t(e($),{icon:"Download",class:"mr-1 h-4 w-4"}),a(" 匯出員工資料 ")]),_:1})])])]),l("div",Fe,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(d).Thead,null,{default:s(()=>[t(e(d).Tr,null,{default:s(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("員工編號")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("姓名")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("Email")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("到職日")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("離職日")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("在職狀態")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("計薪方式")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("更新日期")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[a("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:s(()=>[(C(!0),X(H,null,ae(e(u),(r,k)=>(C(),P(e(d).Tr,{key:k,class:"intro-x"},{default:s(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Le,b(r.id),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Oe,b(r.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",qe,b(r.email),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ge,b(r.onboardDate),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Xe,b(r.resignationDate),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",He,b(r.workStatus),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Je,b(r.salaryType),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ke,b(r.updatedAt),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[l("div",Qe,[t(e(V),{variant:"primary",type:"button",class:"m-3 w-20",onClick:T=>f(k)},{default:s(()=>[t(e($),{icon:"Edit",class:"mr-1 h-4 w-4"}),a(" 修改 ")]),_:2},1032,["onClick"]),t(e(V),{variant:"danger",type:"button",class:"m-3 w-20",onClick:T=>e(x)(r.id)},{default:s(()=>[t(e($),{icon:"Trash",class:"mr-1 h-4 w-4"}),a(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),m.value?(C(),P(e(Te),{key:0,onClose:i[4]||(i[4]=r=>m.value=!1),company:v.value,idx:p.value},null,8,["company","idx"])):W("",!0)],64))}});export{st as default};
