import{T as l}from"./index-aiEbVBin.js";import{u as D,r as I,t as M,b as T,d as U,e as A,U as F,i as S,g as H,o as h,j as V,k as s,s as t,m as a,n,p as g,q as e,_ as y,x as C,v as k,z as L,D as E,h as N,w as O,c as j,y as P,F as R,A as z}from"./index-oBWQfhjf.js";import{_ as $,a as q}from"./FormSelect.vue_vue_type_script_setup_true_lang-WwyZrRan.js";import{u as B}from"./useLeave-1eEi6SK4.js";import"./_plugin-vue_export-helper-x3n3nnut.js";function X(_){const{companyId:u}=D(),r=I({companyId:u.value??1,name:"",limitHours:1,salaryStandard:"ALL",description:""}),{name:x,limitHours:i,salaryStandard:c,description:b}=M(r),v=T(()=>!!_);U(()=>{const p={};if(_){const d={..._,...p};Object.keys(r).forEach(o=>{d[o]!==void 0&&(r[o]=d[o])})}});const w=T(()=>x.value!==""&&i.value.toString()!==""&&i.value>=0&&c.value!=="");return{companyId:u,name:x,limitHours:i,salaryStandard:c,description:b,canSubmit:w,isEdit:v,submit:async(p,d)=>{const o=p?"update":"create";console.log(o),await{create:()=>S.post("/salary/leave",{...r}),update:()=>S.patch(`/salary/leave/${_.id}`,{...r,id:_.id})}[o](),A().showSaveSuccess(),d(),F().fetchLeaveList({companyId:u.value??1,page:1})}}}const G={class:"relative mb-5 text-center text-xl"},J={class:"mb-4 flex items-center"},K={class:"mb-4 flex items-center"},Q={class:"mb-4 flex items-center"},W=a("option",{value:"ALL"},"全薪",-1),Y=a("option",{value:"HALF"},"半薪",-1),Z=a("option",{value:"NONE"},"不支薪",-1),ee=a("option",{value:"OTHER"},"其他",-1),te={class:"mb-4 flex items-center"},se={class:"flex justify-center"},ae=H({__name:"CreateLeaveModal",props:{leave:{},idx:{}},emits:["close"],setup(_,{emit:u}){const r=u,{leave:x}=_,{name:i,limitHours:c,salaryStandard:b,description:v,canSubmit:w,isEdit:m,submit:p}=X(x);return(d,o)=>(h(),V(e(E),{open:!0,size:"md"},{default:s(()=>[t(e(E).Panel,{class:"p-4 md:w-[600px]"},{default:s(()=>[a("div",G,[n(g(e(m)?"編輯假勤":"新增假勤")+" ",1),t(e(y),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>r("close"))})]),a("section",null,[a("div",J,[t(e($),{class:"w-[120px]"},{default:s(()=>[n("假勤名稱 *")]),_:1}),t(e(C),{class:"flex-1",type:"text",modelValue:e(i),"onUpdate:modelValue":o[1]||(o[1]=f=>k(i)?i.value=f:null)},null,8,["modelValue"])]),a("div",K,[t(e($),{class:"w-[120px]"},{default:s(()=>[n("請假上限 (小時) *")]),_:1}),t(e(C),{class:"flex-1",type:"number",min:"0",step:"0.1",modelValue:e(c),"onUpdate:modelValue":o[2]||(o[2]=f=>k(c)?c.value=f:null)},null,8,["modelValue"])]),a("div",Q,[t(e($),{class:"w-[120px]"},{default:s(()=>[n("薪資給薪標準")]),_:1}),t(e(q),{class:"flex-1",modelValue:e(b),"onUpdate:modelValue":o[3]||(o[3]=f=>k(b)?b.value=f:null)},{default:s(()=>[W,Y,Z,ee]),_:1},8,["modelValue"])]),a("div",te,[t(e($),{class:"w-[120px]"},{default:s(()=>[n("說明")]),_:1}),t(e(C),{class:"flex-1",type:"text",modelValue:e(v),"onUpdate:modelValue":o[4]||(o[4]=f=>k(v)?v.value=f:null)},null,8,["modelValue"])]),a("div",se,[t(e(L),{class:"mr-2 flex-1",variant:"primary",onClick:o[5]||(o[5]=()=>e(p)(e(m),()=>r("close"))),disabled:!e(w)},{default:s(()=>[n(g(e(m)?"儲存":"新增"),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),oe={class:"flex justify-between"},le={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},ne={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},de={class:"relative text-slate-500"},re={class:"mt-5 grid grid-cols-12 gap-6"},ie={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},ce={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ue={class:"relative text-slate-500"},me={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},pe={class:"font-medium"},fe={class:"font-medium"},_e={class:"font-medium"},ve={class:"flex items-center justify-center"},ge=H({__name:"LeavePage",setup(_){const{companyId:u}=D(),{leaveList:r,confirmDeleteLeave:x}=B(u.value??1),i=N(!1),c=N(-1);O(u,()=>{B(u.value??1)});const b=T(()=>r.value[c.value]||null),v=m=>{c.value=-1,m!==void 0&&(c.value=m),i.value=!0},w=m=>{x(u.value??1,m)};return(m,p)=>(h(),j("div",null,[a("div",oe,[a("div",le,[a("div",ne,[a("div",de,[t(e(C),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(y),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),a("div",re,[a("div",ie,[a("div",ce,[a("div",ue,[t(e(L),{variant:"primary",type:"button",class:"m-3",onClick:p[0]||(p[0]=d=>v())},{default:s(()=>[t(e(y),{icon:"Plus",class:"mr-1 h-4 w-4"}),n(" 新增條款 ")]),_:1})])])]),a("div",me,[t(e(l),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(l).Thead,null,{default:s(()=>[t(e(l).Tr,null,{default:s(()=>[t(e(l).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[n("名稱")]),_:1}),t(e(l).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[n(" 類別 ")]),_:1}),t(e(l).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[n(" 版本 ")]),_:1}),t(e(l).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[n("動作")]),_:1})]),_:1})]),_:1}),t(e(l).Tbody,null,{default:s(()=>[(h(!0),j(R,null,z(e(r),(d,o)=>(h(),V(e(l).Tr,{key:o,class:"intro-x"},{default:s(()=>[t(e(l).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",pe,g(d.content),1)]),_:2},1024),t(e(l).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",fe,g(d.term_type),1)]),_:2},1024),t(e(l).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",_e,g(d.version),1)]),_:2},1024),t(e(l).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[a("div",ve,[t(e(L),{variant:"primary",type:"button",class:"m-3 w-20",onClick:f=>v(o)},{default:s(()=>[t(e(y),{icon:"Edit",class:"mr-1 h-4 w-4"}),n(" 修改 ")]),_:2},1032,["onClick"]),t(e(L),{variant:"danger",type:"button",class:"m-3 w-20",onClick:f=>w(d.id)},{default:s(()=>[t(e(y),{icon:"Trash",class:"mr-1 h-4 w-4"}),n(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),i.value?(h(),V(e(ae),{key:0,leave:b.value,onClose:p[1]||(p[1]=d=>i.value=!1),idx:c.value},null,8,["leave","idx"])):P("",!0)]))}});export{ge as default};
