import{m as w,n as M,c as v,p as D,q as k,s as h,v as C,d as N,o as j,g as z,w as u,f as i,e as f,j as x,t as y,u as t,i as B,x as E,k as _,y as g,_ as I,D as S,z as A,A as V}from"./index-vk3c6tow.js";import{_ as $}from"./FormLabel.vue_vue_type_script_setup_true_lang-QnAjKaHQ.js";function R(s){const o=w({name:"",taxId:"",enabledModules:[]}),{name:n,taxId:c,enabledModules:l}=M(o),d=v(()=>!!s);D(()=>{const r={};if(s){const a={...s,...r};Object.keys(o).forEach(e=>{a[e]!==void 0&&(o[e]=a[e])})}});const b=v(()=>n.value!==""&&c.value!=="");return{name:n,taxId:c,enabledModules:l,canSubmit:b,isEdit:d,submit:async(r,a)=>{const e=r?"update":"create";console.log(e),await{create:()=>C.post("/company",{...o}),update:()=>C.put(`/company/${s.id}`,{...o,id:s.id})}[e](),k().showSaveSuccess(),a(),h().fetchCompanies()}}}const T={class:"mb-4 flex items-center"},U={class:"mb-4 flex items-center"},q={class:"flex justify-center"},X=N({__name:"CreateCompanyModal",props:{company:{},idx:{}},emits:["close"],setup(s,{emit:o}){const n=o,{company:c}=s,{name:l,taxId:d,canSubmit:b,isEdit:m,submit:r}=R(c);return(a,e)=>(j(),z(t(S),{open:!0,size:"md"},{default:u(()=>[i(t(S).Panel,{class:"p-4 md:w-[400px]"},{default:u(()=>[f("div",{class:E(["relative mb-5",t(m)?"text-primary":"text-center text-xl"])},[x(y(t(m)?a.$t("feature-section8-title")+(a.idx+1):"新增公司")+" ",1),i(t(B),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:e[0]||(e[0]=()=>n("close"))})],2),f("div",T,[i(t($),{class:"w-[120px]"},{default:u(()=>[x(y(a.$t("sub-account-name")),1)]),_:1}),i(t(_),{class:"flex-1",type:"text",placeholder:a.$t("signup-display-name-placeholder"),modelValue:t(l),"onUpdate:modelValue":e[1]||(e[1]=p=>g(l)?l.value=p:null)},null,8,["placeholder","modelValue"])]),f("div",U,[i(t($),{class:"w-[120px]"},{default:u(()=>[x("統一編號")]),_:1}),i(t(_),{class:"flex-1",type:"text",placeholder:a.$t("error-message35"),modelValue:t(d),"onUpdate:modelValue":e[2]||(e[2]=p=>g(d)?d.value=p:null)},null,8,["placeholder","modelValue"])]),f("div",q,[i(t(I),{class:"flex-1",disabled:!t(b),variant:"primary",onClick:e[3]||(e[3]=()=>t(r)(t(m),()=>n("close")))},{default:u(()=>[x(y(a.$t("save-btn")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}))}});function F(){const s=h(),{fetchCompanies:o}=s,n=v(()=>s.companies),c=l=>{A().showModal({deleteType:"company",title:V.global.t("delete-alert-title"),content:V.global.t("page-delete-check-desc"),deleteData:{id:l}})};return o(),{companies:n,fetchCompanies:o,confirmDeleteCompany:c}}export{X as _,F as u};
