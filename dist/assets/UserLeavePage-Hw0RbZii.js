import{m as P,n as z,c as L,p as F,q as R,N as B,v as M,d as j,o as V,g as D,w as s,f as t,e as l,j as o,t as x,u as e,i as w,k as $,y as g,_ as k,D as S,z as q,A,r as I,b as E,h as K,F as O,l as X,K as N}from"./index-vk3c6tow.js";import{T as d}from"./index-XLNbcZof.js";import{_ as T}from"./FormLabel.vue_vue_type_script_setup_true_lang-QnAjKaHQ.js";import{_ as G}from"./FormSelect.vue_vue_type_script_setup_true_lang-RAE3O8nS.js";import{_ as Y}from"./FormDatepicker.vue_vue_type_script_setup_true_lang-X-BrE-EJ.js";function J(_){const i=P({userId:"1",companyId:"1",startTime:"2024-03-25 09:00:00",endTime:"2024-03-25 18:00:00",restHours:1.5,leaveId:"",description:""}),{userId:m,companyId:v,startTime:c,endTime:n,restHours:f,leaveId:b,description:h}=z(i),y=L(()=>!!_);F(()=>{const u={};if(_){const p={..._,...u};Object.keys(i).forEach(a=>{p[a]!==void 0&&(i[a]=p[a])})}});const C=L(()=>m.value!==""&&v.value!==""&&c.value!==""&&n.value!==""&&b.value!=="");return{userId:m,companyId:v,startTime:c,endTime:n,restHours:f,leaveId:b,description:h,canSubmit:C,isEdit:y,submit:async(u,p)=>{const a=u?"update":"create";console.log(a),await{create:()=>M.post("/salary/user-leave",{...i}),update:()=>M.put(`/salary/user-leave/${_.id}`,{...i,id:_.id})}[a](),R().showSaveSuccess(),p(),B().fetchUserLeaveList({companyId:"1",page:1})}}}const Q={class:"relative mb-5 text-center text-xl"},W={class:"mb-4 flex items-center"},Z={class:"mb-4 flex items-center"},ee=l("option",{value:"1"},"病假",-1),te={class:"mb-4 flex items-center"},se={class:"mb-4 flex items-center"},ae={class:"mb-4 flex items-center"},le={class:"mb-4 flex items-center"},oe={class:"flex justify-center"},de=j({__name:"CreateUserLeaveModal",props:{userLeave:{},idx:{}},emits:["close"],setup(_,{emit:i}){const m=i,{userLeave:v}=_,{userId:c,startTime:n,endTime:f,leaveId:b,restHours:h,description:y,canSubmit:C,isEdit:U,submit:u}=J(v);return(p,a)=>(V(),D(e(S),{open:!0,size:"md"},{default:s(()=>[t(e(S).Panel,{class:"p-4 md:w-[600px]"},{default:s(()=>[l("div",Q,[o(x(e(U)?"請假申請"+(p.idx+1):"請假申請")+" ",1),t(e(w),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:a[0]||(a[0]=()=>m("close"))})]),l("section",null,[l("div",W,[t(e(T),{class:"w-[120px]"},{default:s(()=>[o("員工")]),_:1}),t(e($),{class:"flex-1",type:"text",modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=r=>g(c)?c.value=r:null)},null,8,["modelValue"])]),l("div",Z,[t(e(T),{class:"w-[120px]"},{default:s(()=>[o("假別")]),_:1}),t(e(G),{class:"flex-1",modelValue:e(b),"onUpdate:modelValue":a[2]||(a[2]=r=>g(b)?b.value=r:null)},{default:s(()=>[ee]),_:1},8,["modelValue"])]),l("div",te,[t(e(T),{class:"w-[120px]"},{default:s(()=>[o("起始時間")]),_:1}),t(Y,{class:"flex-1",modelValue:e(n),"onUpdate:modelValue":a[3]||(a[3]=r=>g(n)?n.value=r:null),"auto-apply":""},null,8,["modelValue"])]),l("div",se,[t(e(T),{class:"w-[120px]"},{default:s(()=>[o("結束時間")]),_:1}),t(Y,{class:"flex-1",modelValue:e(f),"onUpdate:modelValue":a[4]||(a[4]=r=>g(f)?f.value=r:null),"auto-apply":""},null,8,["modelValue"])]),l("div",ae,[t(e(T),{class:"w-[120px]"},{default:s(()=>[o("休息時間")]),_:1}),t(e($),{class:"flex-1",type:"text",modelValue:e(h),"onUpdate:modelValue":a[5]||(a[5]=r=>g(h)?h.value=r:null)},null,8,["modelValue"])]),l("div",le,[t(e(T),{class:"w-[120px]"},{default:s(()=>[o("原因備註")]),_:1}),t(e($),{class:"flex-1",type:"text",modelValue:e(y),"onUpdate:modelValue":a[6]||(a[6]=r=>g(y)?y.value=r:null)},null,8,["modelValue"])]),l("div",oe,[t(e(k),{class:"mr-2 flex-1",variant:"primary",onClick:a[7]||(a[7]=()=>e(u)(e(U),()=>m("close"))),disabled:!e(C)},{default:s(()=>[o(" 申請 ")]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}});function re(_){const i=B(),{fetchUserLeaveList:m}=i,v=L(()=>i.userLeave),c=(n,f)=>{q().showModal({deleteType:"userLeave",title:A.global.t("delete-alert-title"),content:"確定要刪除這筆資料嗎？刪除後無法復原，需要重新新增",deleteData:{companyId:n,id:f}})};return m({companyId:_,page:1}),{userLeaveList:v,confirmDeleteUserLeave:c,fetchUserLeaveList:m}}const ne={class:"flex justify-between"},ie={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},ce={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},me={class:"relative text-slate-500"},ue={class:"mt-5 grid grid-cols-12 gap-6"},pe={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},_e={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},fe={class:"relative text-slate-500"},be={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ve={class:"relative text-slate-500"},xe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},we={class:"relative text-slate-500"},he={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ye={class:"relative text-slate-500"},ke={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},ge={class:"font-medium"},Te={class:"font-medium"},Ce={class:"font-medium"},Ue={class:"font-medium"},Ve={class:"font-medium"},$e={class:"font-medium"},Le={class:"font-medium"},Ie={class:"flex items-center justify-center"},Ye=j({__name:"UserLeavePage",setup(_){const i=I(1),{userLeaveList:m,confirmDeleteUserLeave:v}=re("1"),c=I(!1),n=I(-1),f=L(()=>m.value[n.value]||null),b=u=>{n.value=-1,u!==void 0&&(n.value=u),c.value=!0},h=()=>{console.log("onExportUserLeaveClick")},y=()=>{console.log("onImportButtonClick")},C=()=>{console.log("onDownloadImportExampleClick")},U=u=>{v(i.value,u)};return(u,p)=>(V(),E("div",null,[l("div",ne,[l("div",ie,[l("div",ce,[l("div",me,[t(e($),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(w),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),l("div",ue,[l("div",pe,[l("div",_e,[l("div",fe,[t(e(k),{variant:"primary",type:"button",class:"m-3",onClick:p[0]||(p[0]=a=>b())},{default:s(()=>[t(e(w),{icon:"Plus",class:"mr-1 h-4 w-4"}),o(" 請假申請 ")]),_:1})])]),l("div",be,[l("div",ve,[t(e(k),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:y},{default:s(()=>[t(e(w),{icon:"Upload",class:"mr-1 h-4 w-4"}),o(" 匯入請假 ")]),_:1})])]),l("div",xe,[l("div",we,[t(e(k),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:h},{default:s(()=>[t(e(w),{icon:"Download",class:"mr-1 h-4 w-4"}),o(" 匯出請假 ")]),_:1})])]),l("div",he,[l("div",ye,[t(e(k),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:C},{default:s(()=>[t(e(w),{icon:"Download",class:"mr-1 h-4 w-4"}),o(" 請假匯入範例 ")]),_:1})])])]),l("div",ke,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(d).Thead,null,{default:s(()=>[t(e(d).Tr,null,{default:s(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("員工編號")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("姓名")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o(" 假勤項目 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("開始時間")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("結束時間")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o(" 休息時間(小時) ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o(" 原因備註 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:s(()=>[(V(!0),E(O,null,X(e(m),(a,r)=>(V(),D(e(d).Tr,{key:r,class:"intro-x"},{default:s(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",ge,x(a.employeeId),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Te,x(a.userName),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ce,x(a.leaveName),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ue,x(e(N)(a.startTime).format("YYYY-MM-DD")),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ve,x(e(N)(a.endTime).format("YYYY-MM-DD")),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",$e,x(a.restHours),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Le,x(a.description),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[l("div",Ie,[t(e(k),{variant:"primary",type:"button",class:"m-3 w-20",onClick:H=>b(r)},{default:s(()=>[t(e(w),{icon:"Edit",class:"mr-1 h-4 w-4"}),o(" 修改 ")]),_:2},1032,["onClick"]),t(e(k),{variant:"danger",type:"button",class:"m-3 w-20",onClick:H=>U(a.id)},{default:s(()=>[t(e(w),{icon:"Trash",class:"mr-1 h-4 w-4"}),o(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),c.value?(V(),D(e(de),{key:0,userLeave:f.value,onClose:p[1]||(p[1]=a=>c.value=!1),idx:n.value},null,8,["userLeave","idx"])):K("",!0)]))}});export{Ye as default};
