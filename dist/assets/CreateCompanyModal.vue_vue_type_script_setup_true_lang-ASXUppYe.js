import{n as g,p as h,c as _,q as S,s as M,v as k,x as y,d as N,o as j,g as z,w as r,f as l,e as f,k as x,t as v,h as t,j as B,y as D,l as C,z as V,_ as E,D as $}from"./index-VpZhjMSo.js";import{_ as w}from"./FormLabel.vue_vue_type_script_setup_true_lang-5wNsczAW.js";function I(s){const o=g({name:"",taxId:"",enabledModules:[]}),{name:n,taxId:u,enabledModules:i}=h(o),d=_(()=>!!s);S(()=>{const c={};if(s){const a={...s,...c};Object.keys(o).forEach(e=>{a[e]!==void 0&&(o[e]=a[e])})}});const b=_(()=>n.value!==""&&u.value!=="");return{name:n,taxId:u,enabledModules:i,canSubmit:b,isEdit:d,submit:async(c,a)=>{const e=c?"update":"create";console.log(e),await{create:()=>y.post("/company",{...o}),update:()=>y.put(`/company/${s.id}`,{...o,id:s.id})}[e](),M().showSaveSuccess(),a(),k().fetchCompanies()}}}const R={class:"mb-4 flex items-center"},U={class:"mb-4 flex items-center"},q={class:"flex justify-center"},T=N({__name:"CreateCompanyModal",props:{company:{},idx:{}},emits:["close"],setup(s,{emit:o}){const n=o,{company:u}=s,{name:i,taxId:d,canSubmit:b,isEdit:m,submit:c}=I(u);return(a,e)=>(j(),z(t($),{open:!0,size:"md"},{default:r(()=>[l(t($).Panel,{class:"p-4 md:w-[400px]"},{default:r(()=>[f("div",{class:D(["relative mb-5",t(m)?"text-primary":"text-center text-xl"])},[x(v(t(m)?a.$t("feature-section8-title")+(a.idx+1):"新增公司")+" ",1),l(t(B),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:e[0]||(e[0]=()=>n("close"))})],2),f("div",R,[l(t(w),{class:"w-[120px]"},{default:r(()=>[x(v(a.$t("sub-account-name")),1)]),_:1}),l(t(C),{class:"flex-1",type:"text",placeholder:a.$t("signup-display-name-placeholder"),modelValue:t(i),"onUpdate:modelValue":e[1]||(e[1]=p=>V(i)?i.value=p:null)},null,8,["placeholder","modelValue"])]),f("div",U,[l(t(w),{class:"w-[120px]"},{default:r(()=>[x("統一編號")]),_:1}),l(t(C),{class:"flex-1",type:"text",placeholder:a.$t("error-message35"),modelValue:t(d),"onUpdate:modelValue":e[2]||(e[2]=p=>V(d)?d.value=p:null)},null,8,["placeholder","modelValue"])]),f("div",q,[l(t(E),{class:"flex-1",disabled:!t(b),variant:"primary",onClick:e[3]||(e[3]=()=>t(c)(t(m),()=>n("close")))},{default:r(()=>[x(v(a.$t("save-btn")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}))}});export{T as _};
