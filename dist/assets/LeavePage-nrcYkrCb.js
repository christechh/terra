import{T as n}from"./index-XLNbcZof.js";import{m as U,n as A,c as V,p as R,q as F,R as N,v as I,d as H,o as g,g as D,w as a,f as t,e as s,j as l,t as C,u as e,i as b,k as T,y as L,_ as h,D as B,z as O,A as P,r as S,b as M,h as z,F as q,l as X}from"./index-vk3c6tow.js";import{_ as $}from"./FormLabel.vue_vue_type_script_setup_true_lang-QnAjKaHQ.js";import{_ as G}from"./FormSelect.vue_vue_type_script_setup_true_lang-RAE3O8nS.js";function J(m){const r=U({companyId:"1",name:"",limitHours:"1",salaryStandard:"ALL",description:""}),{companyId:u,name:_,limitHours:c,salaryStandard:d,description:p}=A(r),f=V(()=>!!m);R(()=>{const x={};if(m){const v={...m,...x};Object.keys(r).forEach(o=>{v[o]!==void 0&&(r[o]=v[o])})}});const y=V(()=>_.value!==""&&c.value!==""&&d.value!==""&&p.value!=="");return{companyId:u,name:_,limitHours:c,salaryStandard:d,description:p,canSubmit:y,isEdit:f,submit:async(x,v)=>{const o=x?"update":"create";console.log(o),await{create:()=>I.post("/salary/leave",{...r}),update:()=>I.put(`/salary/leave/${m.id}`,{...r,id:m.id})}[o](),F().showSaveSuccess(),v(),N().fetchLeaveList({companyId:"1",page:1})}}}const K={class:"relative mb-5 text-center text-xl"},Q={class:"mb-4 flex items-center"},W={class:"mb-4 flex items-center"},Y={class:"mb-4 flex items-center"},Z=s("option",{value:"ALL"},"全薪",-1),ee=s("option",{value:"HALF"},"半薪",-1),te=s("option",{value:"NONE"},"不支薪",-1),se=s("option",{value:"OTHER"},"其他",-1),ae={class:"mb-4 flex items-center"},oe={class:"flex justify-center"},le=H({__name:"CreateLeaveModal",props:{leave:{},idx:{}},emits:["close"],setup(m,{emit:r}){const u=r,{leave:_}=m,{name:c,limitHours:d,salaryStandard:p,description:f,canSubmit:y,isEdit:k,submit:x}=J(_);return(v,o)=>(g(),D(e(B),{open:!0,size:"md"},{default:a(()=>[t(e(B).Panel,{class:"p-4 md:w-[600px]"},{default:a(()=>[s("div",K,[l(C(e(k)?"編輯假勤"+(v.idx+1):"新增假勤")+" ",1),t(e(b),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>u("close"))})]),s("section",null,[s("div",Q,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("假勤名稱")]),_:1}),t(e(T),{class:"flex-1",type:"text",modelValue:e(c),"onUpdate:modelValue":o[1]||(o[1]=i=>L(c)?c.value=i:null)},null,8,["modelValue"])]),s("div",W,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("請假上限（小時）")]),_:1}),t(e(T),{class:"flex-1",type:"text",modelValue:e(d),"onUpdate:modelValue":o[2]||(o[2]=i=>L(d)?d.value=i:null)},null,8,["modelValue"])]),s("div",Y,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("薪資給薪標準")]),_:1}),t(e(G),{class:"flex-1",modelValue:e(p),"onUpdate:modelValue":o[3]||(o[3]=i=>L(p)?p.value=i:null)},{default:a(()=>[Z,ee,te,se]),_:1},8,["modelValue"])]),s("div",ae,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("說明")]),_:1}),t(e(T),{class:"flex-1",type:"text",modelValue:e(f),"onUpdate:modelValue":o[4]||(o[4]=i=>L(f)?f.value=i:null)},null,8,["modelValue"])]),s("div",oe,[t(e(h),{class:"mr-2 flex-1",variant:"primary",onClick:o[5]||(o[5]=()=>e(x)(e(k),()=>u("close"))),disabled:!e(y)},{default:a(()=>[l(" 新增 ")]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}});function ne(m){const r=N(),{fetchLeaveList:u}=r,_=V(()=>r.leave),c=(d,p)=>{O().showModal({deleteType:"leave",title:P.global.t("delete-alert-title"),content:"確定要刪除這筆資料嗎？刪除後無法復原，需要重新新增",deleteData:{companyId:d,id:p}})};return u({companyId:m,page:1}),{leaveList:_,confirmDeleteLeave:c,fetchLeaveList:u}}const de={class:"flex justify-between"},ie={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},re={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ce={class:"relative text-slate-500"},me={class:"mt-5 grid grid-cols-12 gap-6"},ue={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},_e={class:"relative text-slate-500"},fe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ve={class:"relative text-slate-500"},be={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},xe={class:"relative text-slate-500"},we={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},he={class:"relative text-slate-500"},ye={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},ke={class:"font-medium"},ge={class:"font-medium"},Ce={class:"font-medium"},Le={class:"font-medium"},$e={class:"flex items-center justify-center"},Ee=H({__name:"LeavePage",setup(m){const r=S(1),{leaveList:u,confirmDeleteLeave:_}=ne("1"),c=S(!1),d=S(-1),p=V(()=>u.value[d.value]||null),f=o=>{d.value=-1,o!==void 0&&(d.value=o),c.value=!0},y=()=>{console.log("onExportLeaveClick")},k=()=>{console.log("onImportButtonClick")},x=()=>{console.log("onDownloadImportExampleClick")},v=o=>{_(r.value,o)};return(o,i)=>(g(),M("div",null,[s("div",de,[s("div",ie,[s("div",re,[s("div",ce,[t(e(T),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(b),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),s("div",me,[s("div",ue,[s("div",pe,[s("div",_e,[t(e(h),{variant:"primary",type:"button",class:"m-3",onClick:i[0]||(i[0]=w=>f())},{default:a(()=>[t(e(b),{icon:"Plus",class:"mr-1 h-4 w-4"}),l(" 新增假勤 ")]),_:1})])]),s("div",fe,[s("div",ve,[t(e(h),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:k},{default:a(()=>[t(e(b),{icon:"Upload",class:"mr-1 h-4 w-4"}),l(" 匯入假勤 ")]),_:1})])]),s("div",be,[s("div",xe,[t(e(h),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:y},{default:a(()=>[t(e(b),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 匯出假勤 ")]),_:1})])]),s("div",we,[s("div",he,[t(e(h),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:x},{default:a(()=>[t(e(b),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 假勤匯入範例 ")]),_:1})])])]),s("div",ye,[t(e(n),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:a(()=>[t(e(n).Thead,null,{default:a(()=>[t(e(n).Tr,null,{default:a(()=>[t(e(n).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("假勤名稱")]),_:1}),t(e(n).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("請假上限")]),_:1}),t(e(n).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l(" 薪資給新標準 ")]),_:1}),t(e(n).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("說明")]),_:1}),t(e(n).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("動作")]),_:1})]),_:1})]),_:1}),t(e(n).Tbody,null,{default:a(()=>[(g(!0),M(q,null,X(e(u),(w,E)=>(g(),D(e(n).Tr,{key:E,class:"intro-x"},{default:a(()=>[t(e(n).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",ke,C(w.name),1)]),_:2},1024),t(e(n).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",ge,C(w.limitHours),1)]),_:2},1024),t(e(n).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",Ce,C(w.salaryStandard),1)]),_:2},1024),t(e(n).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",Le,C(w.description),1)]),_:2},1024),t(e(n).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:a(()=>[s("div",$e,[t(e(h),{variant:"primary",type:"button",class:"m-3 w-20",onClick:j=>f(E)},{default:a(()=>[t(e(b),{icon:"Edit",class:"mr-1 h-4 w-4"}),l(" 修改 ")]),_:2},1032,["onClick"]),t(e(h),{variant:"danger",type:"button",class:"m-3 w-20",onClick:j=>v(w.id)},{default:a(()=>[t(e(b),{icon:"Trash",class:"mr-1 h-4 w-4"}),l(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),c.value?(g(),D(e(le),{key:0,leave:p.value,onClose:i[1]||(i[1]=w=>c.value=!1),idx:d.value},null,8,["leave","idx"])):z("",!0)]))}});export{Ee as default};
