import{T as d}from"./index-hO9Hz3qR.js";import{p as M,q as U,c as S,s as A,v as F,Y as O,y as I,d as H,o as C,i as E,w as a,f as t,e as s,g as l,t as k,h as e,l as p,m as T,A as L,E as P,_ as w,D as B,r as V,b as N,j as R,F as q,n as z}from"./index-gJgnG53e.js";import{_ as $}from"./FormLabel.vue_vue_type_script_setup_true_lang-FtTE1i6h.js";import{u as X}from"./useLeave-lBbYb_1h.js";function Y(m){const c=M({companyId:"1",name:"",limitHours:"1",salaryStandard:"ALL",description:""}),{companyId:_,name:h,limitHours:r,salaryStandard:i,description:f}=U(c),u=S(()=>!!m);A(()=>{const v={};if(m){const b={...m,...v};Object.keys(c).forEach(o=>{b[o]!==void 0&&(c[o]=b[o])})}});const g=S(()=>h.value!==""&&r.value!==""&&i.value!=="");return{companyId:_,name:h,limitHours:r,salaryStandard:i,description:f,canSubmit:g,isEdit:u,submit:async(v,b)=>{const o=v?"update":"create";console.log(o),await{create:()=>I.post("/salary/leave",{...c}),update:()=>I.patch(`/salary/leave/${m.id}`,{...c,id:m.id})}[o](),F().showSaveSuccess(),b(),O().fetchLeaveList({companyId:"1",page:1})}}}const G={class:"relative mb-5 text-center text-xl"},J={class:"mb-4 flex items-center"},K={class:"mb-4 flex items-center"},Q={class:"mb-4 flex items-center"},W=s("option",{value:"ALL"},"全薪",-1),Z=s("option",{value:"HALF"},"半薪",-1),ee=s("option",{value:"NONE"},"不支薪",-1),te=s("option",{value:"OTHER"},"其他",-1),se={class:"mb-4 flex items-center"},ae={class:"flex justify-center"},oe=H({__name:"CreateLeaveModal",props:{leave:{},idx:{}},emits:["close"],setup(m,{emit:c}){const _=c,{leave:h}=m,{name:r,limitHours:i,salaryStandard:f,description:u,canSubmit:g,isEdit:y,submit:v}=Y(h);return(b,o)=>(C(),E(e(B),{open:!0,size:"md"},{default:a(()=>[t(e(B).Panel,{class:"p-4 md:w-[600px]"},{default:a(()=>[s("div",G,[l(k(e(y)?"編輯假勤":"新增假勤")+" ",1),t(e(p),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>_("close"))})]),s("section",null,[s("div",J,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("假勤名稱 *")]),_:1}),t(e(T),{class:"flex-1",type:"text",modelValue:e(r),"onUpdate:modelValue":o[1]||(o[1]=n=>L(r)?r.value=n:null)},null,8,["modelValue"])]),s("div",K,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("請假上限 (小時) *")]),_:1}),t(e(T),{class:"flex-1",type:"number",modelValue:e(i),"onUpdate:modelValue":o[2]||(o[2]=n=>L(i)?i.value=n:null)},null,8,["modelValue"])]),s("div",Q,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("薪資給薪標準")]),_:1}),t(e(P),{class:"flex-1",modelValue:e(f),"onUpdate:modelValue":o[3]||(o[3]=n=>L(f)?f.value=n:null)},{default:a(()=>[W,Z,ee,te]),_:1},8,["modelValue"])]),s("div",se,[t(e($),{class:"w-[120px]"},{default:a(()=>[l("說明")]),_:1}),t(e(T),{class:"flex-1",type:"text",modelValue:e(u),"onUpdate:modelValue":o[4]||(o[4]=n=>L(u)?u.value=n:null)},null,8,["modelValue"])]),s("div",ae,[t(e(w),{class:"mr-2 flex-1",variant:"primary",onClick:o[5]||(o[5]=()=>e(v)(e(y),()=>_("close"))),disabled:!e(g)},{default:a(()=>[l(k(e(y)?"儲存":"新增"),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),le={class:"flex justify-between"},de={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},ne={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ie={class:"relative text-slate-500"},re={class:"mt-5 grid grid-cols-12 gap-6"},ce={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},me={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ue={class:"relative text-slate-500"},pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},_e={class:"relative text-slate-500"},fe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ve={class:"relative text-slate-500"},be={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},xe={class:"relative text-slate-500"},we={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},he={class:"font-medium"},ye={class:"font-medium"},ke={class:"font-medium"},ge={class:"font-medium"},Ce={class:"flex items-center justify-center"},Se=H({__name:"LeavePage",setup(m){const c=V(1),{leaveList:_,confirmDeleteLeave:h}=X("1"),r=V(!1),i=V(-1),f=S(()=>_.value[i.value]||null),u=o=>{i.value=-1,o!==void 0&&(i.value=o),r.value=!0},g=()=>{console.log("onExportLeaveClick")},y=()=>{console.log("onImportButtonClick")},v=()=>{console.log("onDownloadImportExampleClick")},b=o=>{h(c.value,o)};return(o,n)=>(C(),N("div",null,[s("div",le,[s("div",de,[s("div",ne,[s("div",ie,[t(e(T),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(p),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),s("div",re,[s("div",ce,[s("div",me,[s("div",ue,[t(e(w),{variant:"primary",type:"button",class:"m-3",onClick:n[0]||(n[0]=x=>u())},{default:a(()=>[t(e(p),{icon:"Plus",class:"mr-1 h-4 w-4"}),l(" 新增假勤 ")]),_:1})])]),s("div",pe,[s("div",_e,[t(e(w),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:y},{default:a(()=>[t(e(p),{icon:"Upload",class:"mr-1 h-4 w-4"}),l(" 匯入假勤 ")]),_:1})])]),s("div",fe,[s("div",ve,[t(e(w),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:g},{default:a(()=>[t(e(p),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 匯出假勤 ")]),_:1})])]),s("div",be,[s("div",xe,[t(e(w),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:v},{default:a(()=>[t(e(p),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 假勤匯入範例 ")]),_:1})])])]),s("div",we,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:a(()=>[t(e(d).Thead,null,{default:a(()=>[t(e(d).Tr,null,{default:a(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("假勤名稱")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l(" 請假上限 (小時) ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l(" 薪資給薪標準 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("說明")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:a(()=>[(C(!0),N(q,null,z(e(_),(x,D)=>(C(),E(e(d).Tr,{key:D,class:"intro-x"},{default:a(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",he,k(x.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",ye,k(x.limitHours),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",ke,k(x.salaryStandard),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",ge,k(x.description),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:a(()=>[s("div",Ce,[t(e(w),{variant:"primary",type:"button",class:"m-3 w-20",onClick:j=>u(D)},{default:a(()=>[t(e(p),{icon:"Edit",class:"mr-1 h-4 w-4"}),l(" 修改 ")]),_:2},1032,["onClick"]),t(e(w),{variant:"danger",type:"button",class:"m-3 w-20",onClick:j=>b(x.id)},{default:a(()=>[t(e(p),{icon:"Trash",class:"mr-1 h-4 w-4"}),l(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),r.value?(C(),E(e(oe),{key:0,leave:f.value,onClose:n[1]||(n[1]=x=>r.value=!1),idx:i.value},null,8,["leave","idx"])):R("",!0)]))}});export{Se as default};
