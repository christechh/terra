import{T as d}from"./index-l3_pW_kP.js";import{u as A,p as U,q as F,c as E,s as R,v as P,$ as z,y as H,d as M,o as L,i as S,w as a,g as t,e as s,f as l,t as k,h as e,_,m as V,z as $,C as q,l as w,D as I,r as N,H as X,b as B,j as G,F as J,n as K}from"./index-BNNQ-ZD2.js";import{_ as T}from"./FormLabel.vue_vue_type_script_setup_true_lang-Emo7CXcT.js";import{u as j}from"./useLeave-kL7EEOw4.js";function Q(m){const{companyId:c}=A(),r=U({companyId:c.value,name:"",limitHours:"1",salaryStandard:"ALL",description:""}),{name:h,limitHours:u,salaryStandard:i,description:f}=F(r),p=E(()=>!!m);R(()=>{const v={};if(m){const b={...m,...v};Object.keys(r).forEach(o=>{b[o]!==void 0&&(r[o]=b[o])})}});const g=E(()=>h.value!==""&&u.value!==""&&i.value!=="");return{companyId:c,name:h,limitHours:u,salaryStandard:i,description:f,canSubmit:g,isEdit:p,submit:async(v,b)=>{const o=v?"update":"create";console.log(o),await{create:()=>H.post("/salary/leave",{...r}),update:()=>H.patch(`/salary/leave/${m.id}`,{...r,id:m.id})}[o](),P().showSaveSuccess(),b(),z().fetchLeaveList({companyId:c.value,page:1})}}}const W={class:"relative mb-5 text-center text-xl"},Y={class:"mb-4 flex items-center"},Z={class:"mb-4 flex items-center"},ee={class:"mb-4 flex items-center"},te=s("option",{value:"ALL"},"全薪",-1),se=s("option",{value:"HALF"},"半薪",-1),ae=s("option",{value:"NONE"},"不支薪",-1),oe=s("option",{value:"OTHER"},"其他",-1),le={class:"mb-4 flex items-center"},ne={class:"flex justify-center"},de=M({__name:"CreateLeaveModal",props:{leave:{},idx:{}},emits:["close"],setup(m,{emit:c}){const r=c,{leave:h}=m,{name:u,limitHours:i,salaryStandard:f,description:p,canSubmit:g,isEdit:y,submit:v}=Q(h);return(b,o)=>(L(),S(e(I),{open:!0,size:"md"},{default:a(()=>[t(e(I).Panel,{class:"p-4 md:w-[600px]"},{default:a(()=>[s("div",W,[l(k(e(y)?"編輯假勤":"新增假勤")+" ",1),t(e(_),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:o[0]||(o[0]=()=>r("close"))})]),s("section",null,[s("div",Y,[t(e(T),{class:"w-[120px]"},{default:a(()=>[l("假勤名稱 *")]),_:1}),t(e(V),{class:"flex-1",type:"text",modelValue:e(u),"onUpdate:modelValue":o[1]||(o[1]=n=>$(u)?u.value=n:null)},null,8,["modelValue"])]),s("div",Z,[t(e(T),{class:"w-[120px]"},{default:a(()=>[l("請假上限 (小時) *")]),_:1}),t(e(V),{class:"flex-1",type:"number",modelValue:e(i),"onUpdate:modelValue":o[2]||(o[2]=n=>$(i)?i.value=n:null),onkeyup:"value=value.replace(/^(0+)|[^\\d]+/g,'')"},null,8,["modelValue"])]),s("div",ee,[t(e(T),{class:"w-[120px]"},{default:a(()=>[l("薪資給薪標準")]),_:1}),t(e(q),{class:"flex-1",modelValue:e(f),"onUpdate:modelValue":o[3]||(o[3]=n=>$(f)?f.value=n:null)},{default:a(()=>[te,se,ae,oe]),_:1},8,["modelValue"])]),s("div",le,[t(e(T),{class:"w-[120px]"},{default:a(()=>[l("說明")]),_:1}),t(e(V),{class:"flex-1",type:"text",modelValue:e(p),"onUpdate:modelValue":o[4]||(o[4]=n=>$(p)?p.value=n:null)},null,8,["modelValue"])]),s("div",ne,[t(e(w),{class:"mr-2 flex-1",variant:"primary",onClick:o[5]||(o[5]=()=>e(v)(e(y),()=>r("close"))),disabled:!e(g)},{default:a(()=>[l(k(e(y)?"儲存":"新增"),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}}),re={class:"flex justify-between"},ie={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},ce={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ue={class:"relative text-slate-500"},me={class:"mt-5 grid grid-cols-12 gap-6"},pe={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},_e={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},fe={class:"relative text-slate-500"},ve={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},be={class:"relative text-slate-500"},xe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},we={class:"relative text-slate-500"},he={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ye={class:"relative text-slate-500"},ke={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},ge={class:"font-medium"},Ce={class:"font-medium"},Le={class:"font-medium"},$e={class:"font-medium"},Te={class:"flex items-center justify-center"},He=M({__name:"LeavePage",setup(m){const{companyId:c}=A(),{leaveList:r,confirmDeleteLeave:h}=j(c.value),u=N(!1),i=N(-1);X(c,()=>{j(c.value)});const f=E(()=>r.value[i.value]||null),p=n=>{i.value=-1,n!==void 0&&(i.value=n),u.value=!0},g=()=>{console.log("onExportLeaveClick")},y=()=>{console.log("onImportButtonClick")},v=()=>{console.log("onDownloadImportExampleClick")},b=n=>{h(c.value,n)},o=n=>({ALL:"全薪",HALF:"半薪",NONE:"不支薪",OTHER:"其他"})[n]||"null";return(n,C)=>(L(),B("div",null,[s("div",re,[s("div",ie,[s("div",ce,[s("div",ue,[t(e(V),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(_),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),s("div",me,[s("div",pe,[s("div",_e,[s("div",fe,[t(e(w),{variant:"primary",type:"button",class:"m-3",onClick:C[0]||(C[0]=x=>p())},{default:a(()=>[t(e(_),{icon:"Plus",class:"mr-1 h-4 w-4"}),l(" 新增假勤 ")]),_:1})])]),s("div",ve,[s("div",be,[t(e(w),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:y},{default:a(()=>[t(e(_),{icon:"Upload",class:"mr-1 h-4 w-4"}),l(" 匯入假勤 ")]),_:1})])]),s("div",xe,[s("div",we,[t(e(w),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:g},{default:a(()=>[t(e(_),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 匯出假勤 ")]),_:1})])]),s("div",he,[s("div",ye,[t(e(w),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:v},{default:a(()=>[t(e(_),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 假勤匯入範例 ")]),_:1})])])]),s("div",ke,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:a(()=>[t(e(d).Thead,null,{default:a(()=>[t(e(d).Tr,null,{default:a(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("假勤名稱")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l(" 請假上限 (小時) ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l(" 薪資給薪標準 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("說明")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:a(()=>[l("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:a(()=>[(L(!0),B(J,null,K(e(r),(x,D)=>(L(),S(e(d).Tr,{key:D,class:"intro-x"},{default:a(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",ge,k(x.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",Ce,k(x.limitHours),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",Le,k(o(x.salaryStandard)),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:a(()=>[s("div",$e,k(x.description),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:a(()=>[s("div",Te,[t(e(w),{variant:"primary",type:"button",class:"m-3 w-20",onClick:O=>p(D)},{default:a(()=>[t(e(_),{icon:"Edit",class:"mr-1 h-4 w-4"}),l(" 修改 ")]),_:2},1032,["onClick"]),t(e(w),{variant:"danger",type:"button",class:"m-3 w-20",onClick:O=>b(x.id)},{default:a(()=>[t(e(_),{icon:"Trash",class:"mr-1 h-4 w-4"}),l(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),u.value?(L(),S(e(de),{key:0,leave:f.value,onClose:C[1]||(C[1]=x=>u.value=!1),idx:i.value},null,8,["leave","idx"])):G("",!0)]))}});export{He as default};
