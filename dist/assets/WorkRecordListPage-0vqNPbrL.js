import{n as U,p as j,c as I,q as A,s as N,O as H,x as Y,d as B,o as V,g as W,w as s,f as t,e as o,k as l,t as v,h as e,j as w,l as D,z as g,C as F,_ as y,D as M,G as P,H as z,r as R,b as S,i as q,F as G,m as K,M as L}from"./index-VpZhjMSo.js";import{T as d}from"./index-zpbfB0Kk.js";import{_ as T}from"./FormLabel.vue_vue_type_script_setup_true_lang-5wNsczAW.js";import{_ as E}from"./FormDatepicker.vue_vue_type_script_setup_true_lang-_Sdr4om6.js";function X(_){const i=U({userId:"1",companyId:"1",startTime:"2024-03-25 09:00:00",endTime:"2024-03-25 18:00:00",restHours:1.5,type:"HOLIDAY",description:""}),{userId:u,companyId:x,startTime:c,endTime:n,restHours:f,type:b,description:h}=j(i),k=I(()=>!!_);A(()=>{const m={};if(_){const p={..._,...m};Object.keys(i).forEach(a=>{p[a]!==void 0&&(i[a]=p[a])})}});const C=I(()=>u.value!==""&&x.value!==""&&c.value!==""&&n.value!==""&&f.value!==0&&b.value!=="");return{userId:u,companyId:x,startTime:c,endTime:n,restHours:f,type:b,description:h,canSubmit:C,isEdit:k,submit:async(m,p)=>{const a=m?"update":"create";console.log(a),await{create:()=>Y.post("/salary/work-record",{...i}),update:()=>Y.put(`/salary/work-record/${_.id}`,{...i,id:_.id})}[a](),N().showSaveSuccess(),p(),H().fetchWorkRecordList({companyId:"1",page:1})}}}const J={class:"relative mb-5 text-center text-xl"},Q={class:"mb-4 flex items-center"},Z={class:"mb-4 flex items-center"},ee=o("option",{value:"HOLIDAY"},"例假日",-1),te=o("option",{value:"OFFICIALHOLIDAY"},"國定假日",-1),se=o("option",{value:"RESTDAY"},"休息日",-1),oe=o("option",{value:"WORKDAY"},"工作日",-1),ae={class:"mb-4 flex items-center"},le={class:"mb-4 flex items-center"},de={class:"mb-4 flex items-center"},re={class:"mb-4 flex items-center"},ne={class:"flex justify-center"},ie=B({__name:"CreateWorkRecordModal",props:{workRecord:{},idx:{}},emits:["close"],setup(_,{emit:i}){const u=i,{workRecord:x}=_,{userId:c,startTime:n,endTime:f,type:b,restHours:h,description:k,canSubmit:C,isEdit:$,submit:m}=X(x);return(p,a)=>(V(),W(e(M),{open:!0,size:"md"},{default:s(()=>[t(e(M).Panel,{class:"p-4 md:w-[600px]"},{default:s(()=>[o("div",J,[l(v(e($)?"加班/兼職申請"+(p.idx+1):"加班/兼職申請")+" ",1),t(e(w),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:a[0]||(a[0]=()=>u("close"))})]),o("section",null,[o("div",Q,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("員工")]),_:1}),t(e(D),{class:"flex-1",type:"text",modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=r=>g(c)?c.value=r:null)},null,8,["modelValue"])]),o("div",Z,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("加班歸屬日")]),_:1}),t(e(F),{class:"flex-1",modelValue:e(b),"onUpdate:modelValue":a[2]||(a[2]=r=>g(b)?b.value=r:null)},{default:s(()=>[ee,te,se,oe]),_:1},8,["modelValue"])]),o("div",ae,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("起始時間")]),_:1}),t(E,{class:"flex-1",modelValue:e(n),"onUpdate:modelValue":a[3]||(a[3]=r=>g(n)?n.value=r:null),"auto-apply":""},null,8,["modelValue"])]),o("div",le,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("結束時間")]),_:1}),t(E,{class:"flex-1",modelValue:e(f),"onUpdate:modelValue":a[4]||(a[4]=r=>g(f)?f.value=r:null),"auto-apply":""},null,8,["modelValue"])]),o("div",de,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("休息時間")]),_:1}),t(e(D),{class:"flex-1",type:"text",modelValue:e(h),"onUpdate:modelValue":a[5]||(a[5]=r=>g(h)?h.value=r:null)},null,8,["modelValue"])]),o("div",re,[t(e(T),{class:"w-[120px]"},{default:s(()=>[l("工作內容備註")]),_:1}),t(e(D),{class:"flex-1",type:"text",modelValue:e(k),"onUpdate:modelValue":a[6]||(a[6]=r=>g(k)?k.value=r:null)},null,8,["modelValue"])]),o("div",ne,[t(e(y),{class:"mr-2 flex-1",variant:"primary",onClick:a[7]||(a[7]=()=>e(m)(e($),()=>u("close"))),disabled:!e(C)},{default:s(()=>[l(" 申請 ")]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}});function ce(_){const i=H(),{fetchWorkRecordList:u}=i,x=I(()=>i.workRecordList),c=(n,f)=>{P().showModal({deleteType:"workRecord",title:z.global.t("delete-alert-title"),content:"確定要刪除這筆資料嗎？刪除後無法復原，需要重新新增",deleteData:{companyId:n,id:f}})};return u({companyId:_,page:1}),{workRecordList:x,confirmDeleteWorkRecord:c,fetchWorkRecordList:u}}const ue={class:"flex justify-between"},me={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},_e={class:"relative text-slate-500"},fe={class:"mt-5 grid grid-cols-12 gap-6"},be={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},xe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ve={class:"relative text-slate-500"},we={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},he={class:"relative text-slate-500"},ke={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ye={class:"relative text-slate-500"},ge={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Te={class:"relative text-slate-500"},Ce={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},$e={class:"font-medium"},Ve={class:"font-medium"},De={class:"font-medium"},Ie={class:"font-medium"},Re={class:"font-medium"},We={class:"font-medium"},Ye={class:"font-medium"},Me={class:"flex items-center justify-center"},Be=B({__name:"WorkRecordListPage",setup(_){const i=R(1),{workRecordList:u,confirmDeleteWorkRecord:x}=ce("1"),c=R(!1),n=R(-1),f=I(()=>u.value[n.value]||null),b=m=>{n.value=-1,m!==void 0&&(n.value=m),c.value=!0},h=()=>{console.log("onExportWorkRecordClick")},k=()=>{console.log("onImportButtonClick")},C=()=>{console.log("onDownloadImportExampleClick")},$=m=>{x(i.value,m)};return(m,p)=>(V(),S("div",null,[o("div",ue,[o("div",me,[o("div",pe,[o("div",_e,[t(e(D),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(w),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),o("div",fe,[o("div",be,[o("div",xe,[o("div",ve,[t(e(y),{variant:"primary",type:"button",class:"m-3",onClick:p[0]||(p[0]=a=>b())},{default:s(()=>[t(e(w),{icon:"Plus",class:"mr-1 h-4 w-4"}),l(" 加班/兼職申請 ")]),_:1})])]),o("div",we,[o("div",he,[t(e(y),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:k},{default:s(()=>[t(e(w),{icon:"Upload",class:"mr-1 h-4 w-4"}),l(" 匯入加班/出勤 ")]),_:1})])]),o("div",ke,[o("div",ye,[t(e(y),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:h},{default:s(()=>[t(e(w),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 匯出加班/出勤 ")]),_:1})])]),o("div",ge,[o("div",Te,[t(e(y),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:C},{default:s(()=>[t(e(w),{icon:"Download",class:"mr-1 h-4 w-4"}),l(" 加班/兼職匯入範例 ")]),_:1})])])]),o("div",Ce,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(d).Thead,null,{default:s(()=>[t(e(d).Tr,null,{default:s(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("員工編號")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("姓名")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l(" 加班歸屬日 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("開始時間")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("結束時間")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l(" 休息時間(小時) ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l(" 工作內容備註 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[l("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:s(()=>[(V(!0),S(G,null,K(e(u),(a,r)=>(V(),W(e(d).Tr,{key:r,class:"intro-x"},{default:s(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",$e,v(a.employeeId),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",Ve,v(a.userName),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",De,v(a.type),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",Ie,v(e(L)(a.startTime).format("YYYY-MM-DD")),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",Re,v(e(L)(a.endTime).format("YYYY-MM-DD")),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",We,v(a.restHours),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[o("div",Ye,v(a.description),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[o("div",Me,[t(e(y),{variant:"primary",type:"button",class:"m-3 w-20",onClick:O=>b(r)},{default:s(()=>[t(e(w),{icon:"Edit",class:"mr-1 h-4 w-4"}),l(" 修改 ")]),_:2},1032,["onClick"]),t(e(y),{variant:"danger",type:"button",class:"m-3 w-20",onClick:O=>$(a.id)},{default:s(()=>[t(e(w),{icon:"Trash",class:"mr-1 h-4 w-4"}),l(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),c.value?(V(),W(e(ie),{key:0,workRecord:f.value,onClose:p[1]||(p[1]=a=>c.value=!1),idx:n.value},null,8,["workRecord","idx"])):q("",!0)]))}});export{Be as default};
