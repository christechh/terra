import{n as w,p as g,c as _,q as S,s as M,v as k,x as y,d as N,o as z,i as B,w as r,g as l,e as f,f as x,t as v,h as a,_ as D,y as E,l as C,z as V,k as I,D as $}from"./index-xbrZr5yp.js";import{_ as h}from"./FormLabel.vue_vue_type_script_setup_true_lang-azPn_ecF.js";function j(s){const o=w({name:"",taxId:"",enabledModules:[]}),{name:n,taxId:u,enabledModules:i}=g(o),c=_(()=>!!s);S(()=>{const d={};if(s){const t={...s,...d};Object.keys(o).forEach(e=>{t[e]!==void 0&&(o[e]=t[e])})}});const b=_(()=>n.value!==""&&u.value!=="");return{name:n,taxId:u,enabledModules:i,canSubmit:b,isEdit:c,submit:async(d,t)=>{const e=d?"update":"create";console.log(e),await{create:()=>y.post("/company",{...o}),update:()=>y.patch(`/company/${s.id}`,{...o,id:s.id})}[e](),M().showSaveSuccess(),t(),k().fetchCompanies()}}}const R={class:"mb-4 flex items-center"},U={class:"mb-4 flex items-center"},q={class:"flex justify-center"},T=N({__name:"CreateCompanyModal",props:{company:{},idx:{}},emits:["close"],setup(s,{emit:o}){const n=o,{company:u}=s,{name:i,taxId:c,canSubmit:b,isEdit:m,submit:d}=j(u);return(t,e)=>(z(),B(a($),{open:!0,size:"md"},{default:r(()=>[l(a($).Panel,{class:"p-4 md:w-[400px]"},{default:r(()=>[f("div",{class:E(["relative mb-5",a(m)?"text-primary":"text-center text-xl"])},[x(v(a(m)?t.$t("feature-section8-title")+(t.idx+1):"新增公司")+" ",1),l(a(D),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:e[0]||(e[0]=()=>n("close"))})],2),f("div",R,[l(a(h),{class:"w-[120px]"},{default:r(()=>[x(v(t.$t("sub-account-name")),1)]),_:1}),l(a(C),{class:"flex-1",type:"text",placeholder:t.$t("signup-display-name-placeholder"),modelValue:a(i),"onUpdate:modelValue":e[1]||(e[1]=p=>V(i)?i.value=p:null)},null,8,["placeholder","modelValue"])]),f("div",U,[l(a(h),{class:"w-[120px]"},{default:r(()=>[x("統一編號")]),_:1}),l(a(C),{class:"flex-1",type:"text",placeholder:t.$t("error-message35"),modelValue:a(c),"onUpdate:modelValue":e[2]||(e[2]=p=>V(c)?c.value=p:null)},null,8,["placeholder","modelValue"])]),f("div",q,[l(a(I),{class:"flex-1",disabled:!a(b),variant:"primary",onClick:e[3]||(e[3]=()=>a(d)(a(m),()=>n("close")))},{default:r(()=>[x(v(t.$t("save-btn")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}))}});export{T as _};
