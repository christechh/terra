import{m as B,n as D,c as T,p as N,q as U,s as E,v as V,d as j,o as C,g as $,w as s,f as t,e as a,j as o,t as v,u as e,i as f,x as P,k as y,y as g,_,D as S,r as I,b as M,h as z,F,l as L}from"./index-8VblRAgl.js";import{T as r}from"./index-F4y7qTpd.js";import{_ as k}from"./FormLabel.vue_vue_type_script_setup_true_lang-W088hPoC.js";import{u as O}from"./useCompany-bJBIt-bh.js";function R(b){const p=B({name:"",taxId:"",enabledModules:[]}),{name:h,taxId:x,enabledModules:i}=D(p),m=T(()=>!!b);N(()=>{const n={};if(b){const d={...b,...n};Object.keys(p).forEach(l=>{d[l]!==void 0&&(p[l]=d[l])})}});const u=T(()=>h.value!==""&&x.value!=="");return{name:h,taxId:x,enabledModules:i,canSubmit:u,isEdit:m,submit:async(n,d)=>{const l=n?"update":"create";console.log(l),await{create:()=>V.post("/company",{...p}),update:()=>V.put(`/company/${b.id}`,{...p,id:b.id})}[l](),U().showSaveSuccess(),d(),E().fetchCompanies()}}}const q={class:"mb-4 flex items-center"},A={class:"mb-4 flex items-center"},X={class:"mb-4 flex items-center"},G={class:"mb-4 flex items-center"},H={class:"mb-4 flex items-center"},J={class:"flex justify-center"},K=j({__name:"CreateCompanyModal",props:{company:{},idx:{}},emits:["close"],setup(b,{emit:p}){const h=p,{company:x}=b,{name:i,taxId:m,canSubmit:u,isEdit:w,submit:n}=R(x);return(d,l)=>(C(),$(e(S),{open:!0,size:"md"},{default:s(()=>[t(e(S).Panel,{class:"p-4 md:w-[400px]"},{default:s(()=>[a("div",{class:P(["relative mb-5",e(w)?"text-primary":"text-center text-xl"])},[o(v(e(w)?d.$t("feature-section8-title")+(d.idx+1):"薪資計算")+" ",1),t(e(f),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:l[0]||(l[0]=()=>h("close"))})],2),a("div",q,[t(e(k),{class:"w-[120px]"},{default:s(()=>[o("薪資發放名稱")]),_:1}),t(e(y),{class:"flex-1",type:"text",placeholder:d.$t("signup-display-name-placeholder"),modelValue:e(i),"onUpdate:modelValue":l[1]||(l[1]=c=>g(i)?i.value=c:null)},null,8,["placeholder","modelValue"])]),a("div",A,[t(e(k),{class:"w-[120px]"},{default:s(()=>[o("薪資年月")]),_:1}),t(e(y),{class:"flex-1",type:"text",placeholder:d.$t("signup-display-name-placeholder"),modelValue:e(i),"onUpdate:modelValue":l[2]||(l[2]=c=>g(i)?i.value=c:null)},null,8,["placeholder","modelValue"])]),a("div",X,[t(e(k),{class:"w-[120px]"},{default:s(()=>[o("起始日")]),_:1}),t(e(y),{class:"flex-1",type:"text",placeholder:d.$t("error-message35"),modelValue:e(m),"onUpdate:modelValue":l[3]||(l[3]=c=>g(m)?m.value=c:null)},null,8,["placeholder","modelValue"])]),a("div",G,[t(e(k),{class:"w-[120px]"},{default:s(()=>[o("結束日")]),_:1}),t(e(y),{class:"flex-1",type:"text",placeholder:d.$t("error-message35"),modelValue:e(m),"onUpdate:modelValue":l[4]||(l[4]=c=>g(m)?m.value=c:null)},null,8,["placeholder","modelValue"])]),a("div",H,[t(e(k),{class:"w-[120px]"},{default:s(()=>[o("發薪日")]),_:1}),t(e(y),{class:"flex-1",type:"text",placeholder:d.$t("error-message35"),modelValue:e(m),"onUpdate:modelValue":l[5]||(l[5]=c=>g(m)?m.value=c:null)},null,8,["placeholder","modelValue"])]),a("div",J,[t(e(_),{class:"flex-1",disabled:!e(u),variant:"primary",onClick:l[6]||(l[6]=()=>e(n)(e(w),()=>h("close")))},{default:s(()=>[o(" 送出 ")]),_:1},8,["disabled"])])]),_:1})]),_:1}))}}),Q={class:"flex justify-between"},W={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},Y={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},Z={class:"relative text-slate-500"},ee={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},te={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},se={class:"relative text-slate-500"},ae={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},le={class:"relative text-slate-500"},oe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},de={class:"relative text-slate-500"},re={class:"mt-5 grid grid-cols-12 gap-6"},ne={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},ie={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},me={class:"relative text-slate-500"},ce={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ue={class:"relative text-slate-500"},pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},fe={class:"relative text-slate-500"},_e={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},be={class:"font-medium"},xe={class:"font-medium"},we={class:"font-medium"},ve={class:"font-medium"},he={class:"font-medium"},ye={class:"font-medium"},ge={class:"font-medium"},ke={class:"flex items-center justify-center"},Se=j({__name:"Salary",setup(b){const{companies:p,confirmDeleteCompany:h}=O(),x=I(!1),i=I(-1),m=T(()=>p.value[i.value]||null),u=w=>{i.value=-1,w!==void 0&&(i.value=w),x.value=!0};return(w,n)=>(C(),M("div",null,[a("div",Q,[a("div",W,[a("div",Y,[a("div",Z,[t(e(y),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(f),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])]),a("div",ee,[a("div",te,[a("div",se,[t(e(_),{variant:"primary",type:"button",class:"m-3",onClick:n[0]||(n[0]=()=>u())},{default:s(()=>[t(e(f),{icon:"Plus",class:"mr-1 h-4 w-4"}),o(" 加班/兼職出勤 ")]),_:1})])]),a("div",ae,[a("div",le,[t(e(_),{variant:"primary",type:"button",class:"m-3",onClick:n[1]||(n[1]=()=>u())},{default:s(()=>[t(e(f),{icon:"Plus",class:"mr-1 h-4 w-4"}),o(" 薪資科別加減項 ")]),_:1})])]),a("div",oe,[a("div",de,[t(e(_),{variant:"primary",type:"button",class:"m-3",onClick:n[2]||(n[2]=()=>u())},{default:s(()=>[t(e(f),{icon:"Settings",class:"mr-1 h-4 w-4"}),o(" 假勤設定 ")]),_:1})])])])]),a("div",re,[a("div",ne,[a("div",ie,[a("div",me,[t(e(_),{variant:"primary",type:"button",class:"m-3",onClick:n[3]||(n[3]=()=>u())},{default:s(()=>[t(e(f),{icon:"Plus",class:"mr-1 h-4 w-4"}),o(" 薪資計算 ")]),_:1})])]),a("div",ce,[a("div",ue,[t(e(_),{variant:"primary",type:"button",class:"m-3",onClick:n[4]||(n[4]=()=>u())},{default:s(()=>[t(e(f),{icon:"Download",class:"mr-1 h-4 w-4"}),o(" 匯出薪資明細 ")]),_:1})])]),a("div",pe,[a("div",fe,[t(e(_),{variant:"primary",type:"button",class:"m-3",onClick:n[5]||(n[5]=()=>u()),disabled:""},{default:s(()=>[t(e(f),{icon:"Send",class:"mr-1 h-4 w-4"}),o(" 薪資單寄送 ")]),_:1})])])]),a("div",_e,[t(e(r),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(r).Thead,null,{default:s(()=>[t(e(r).Tr,null,{default:s(()=>[t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("薪資年月")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("發放名稱")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("起始日")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("結束日")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("發放人數")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("發放日期")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("狀態")]),_:1}),t(e(r).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("動作")]),_:1})]),_:1})]),_:1}),t(e(r).Tbody,null,{default:s(()=>[(C(!0),M(F,null,L(e(p),(d,l)=>(C(),$(e(r).Tr,{key:l,class:"intro-x"},{default:s(()=>[t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",be,v(d.id),1)]),_:2},1024),t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",xe,v(d.name),1)]),_:2},1024),t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",we,v(d.taxId),1)]),_:2},1024),t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",ve,v(d.taxId),1)]),_:2},1024),t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",he,v(d.taxId),1)]),_:2},1024),t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",ye,v(d.taxId),1)]),_:2},1024),t(e(r).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[a("div",ge,v(d.taxId),1)]),_:2},1024),t(e(r).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[a("div",ke,[t(e(_),{variant:"primary",type:"button",class:"m-3 w-24",onClick:c=>u(l)},{default:s(()=>[t(e(f),{icon:"LibraryBig",class:"mr-1 h-4 w-4"}),o(" 薪資單 ")]),_:2},1032,["onClick"]),t(e(_),{variant:"danger",type:"button",class:"m-3 w-20",onClick:c=>e(h)(d.id)},{default:s(()=>[t(e(f),{icon:"Trash",class:"mr-1 h-4 w-4"}),o(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),x.value?(C(),$(e(K),{key:0,onClose:n[6]||(n[6]=d=>x.value=!1),company:m.value,idx:i.value},null,8,["company","idx"])):z("",!0)]))}});export{Se as default};
