import{T as d}from"./index-zpbfB0Kk.js";import{n as P,p as z,c as $,q as F,s as R,P as L,x as M,d as j,o as V,g as D,w as s,f as t,e as l,k as o,t as h,h as e,j as w,l as S,z as g,_ as k,D as U,G as q,H as G,r as I,b as B,i as H,F as O,m as X}from"./index-VpZhjMSo.js";import{_ as C}from"./FormLabel.vue_vue_type_script_setup_true_lang-5wNsczAW.js";import{_ as A}from"./FormDatepicker.vue_vue_type_script_setup_true_lang-_Sdr4om6.js";function J(p){const i=P({companyId:"1",userId:"1",type:"PLUS",name:"",description:"",amount:0,yearMonth:""}),{companyId:f,userId:b,type:c,name:r,description:_,amount:x,yearMonth:v}=z(i),y=$(()=>!!p);F(()=>{const m={};if(p){const u={...p,...m};Object.keys(i).forEach(a=>{u[a]!==void 0&&(i[a]=u[a])})}});const E=$(()=>b.value!==""&&c.value!==""&&r.value!==""&&x.value!==0&&v.value!=="");return{companyId:f,userId:b,type:c,name:r,description:_,amount:x,yearMonth:v,canSubmit:E,isEdit:y,submit:async(m,u)=>{const a=m?"update":"create";console.log(a),await{create:()=>M.post("/salary/salary-extend",{...i}),update:()=>M.put(`/salary/salary-extend/${p.id}`,{...i,id:p.id})}[a](),R().showSaveSuccess(),u(),L().fetchSalaryExtendList({companyId:"1",page:1})}}}const K={class:"relative mb-5 text-center text-xl"},Q={class:"mb-4 flex items-center"},W={class:"mb-4 flex items-center"},Y={class:"mb-4 flex items-center"},Z={class:"mb-4 flex items-center"},ee={class:"mb-4 flex items-center"},te={class:"mb-4 flex items-center"},se={class:"flex justify-center"},ae=j({__name:"CreateSalaryExtendModal",props:{salaryExtend:{},idx:{}},emits:["close"],setup(p,{emit:i}){const f=i,{salaryExtend:b}=p,{userId:c,name:r,description:_,type:x,amount:v,yearMonth:y,canSubmit:E,isEdit:T,submit:m}=J(b);return(u,a)=>(V(),D(e(U),{open:!0,size:"md"},{default:s(()=>[t(e(U).Panel,{class:"p-4 md:w-[600px]"},{default:s(()=>[l("div",K,[o(h(e(T)?"編輯假勤"+(u.idx+1):"新增假勤")+" ",1),t(e(w),{icon:"X",class:"absolute right-0 top-0 cursor-pointer text-[#939393]",onClick:a[0]||(a[0]=()=>f("close"))})]),l("section",null,[l("div",Q,[t(e(C),{class:"w-[120px]"},{default:s(()=>[o("員工")]),_:1}),t(e(S),{class:"flex-1",type:"text",modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=n=>g(c)?c.value=n:null)},null,8,["modelValue"])]),l("div",W,[t(e(C),{class:"w-[120px]"},{default:s(()=>[o("薪資年月")]),_:1}),t(e(A),{class:"flex-1",modelValue:e(y),"onUpdate:modelValue":a[2]||(a[2]=n=>g(y)?y.value=n:null),"month-picker":"","auto-apply":""},null,8,["modelValue"])]),l("div",Y,[t(e(C),{class:"w-[120px]"},{default:s(()=>[o("薪資科目")]),_:1}),t(e(S),{class:"flex-1",type:"text",modelValue:e(r),"onUpdate:modelValue":a[3]||(a[3]=n=>g(r)?r.value=n:null)},null,8,["modelValue"])]),l("div",Z,[t(e(C),{class:"w-[120px]"},{default:s(()=>[o("金額")]),_:1}),t(e(S),{class:"flex-1",type:"text",modelValue:e(v),"onUpdate:modelValue":a[4]||(a[4]=n=>g(v)?v.value=n:null)},null,8,["modelValue"])]),l("div",ee,[t(e(C),{class:"w-[120px]"},{default:s(()=>[o("備註")]),_:1}),t(e(S),{class:"flex-1",type:"text",modelValue:e(_),"onUpdate:modelValue":a[5]||(a[5]=n=>g(_)?_.value=n:null)},null,8,["modelValue"])]),l("div",te,[t(e(C),{class:"w-[120px]"},{default:s(()=>[o("加減項")]),_:1}),t(e(S),{class:"flex-1",type:"text",modelValue:e(x),"onUpdate:modelValue":a[6]||(a[6]=n=>g(x)?x.value=n:null)},null,8,["modelValue"])]),l("div",se,[t(e(k),{class:"mr-2 flex-1",variant:"primary",onClick:a[7]||(a[7]=()=>e(m)(e(T),()=>f("close"))),disabled:!e(E)},{default:s(()=>[o(" 新增 ")]),_:1},8,["disabled"])])])]),_:1})]),_:1}))}});function le(p){const i=L(),{fetchSalaryExtendList:f}=i,b=$(()=>i.salaryExtend),c=(r,_)=>{q().showModal({deleteType:"salaryExtend",title:G.global.t("delete-alert-title"),content:"確定要刪除這筆資料嗎？刪除後無法復原，需要重新新增",deleteData:{companyId:r,id:_}})};return f({companyId:p,page:1}),{salaryExtendList:b,confirmDeleteSalaryExtend:c,fetchSalaryExtendList:f}}const oe={class:"flex justify-between"},de={class:"intro-y col-span-12 mt-2 flex flex-wrap items-center sm:flex-nowrap"},ne={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},re={class:"relative text-slate-500"},ie={class:"mt-5 grid grid-cols-12 gap-6"},ce={class:"intro-y col-span-12 flex flex-wrap items-center sm:flex-nowrap"},me={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ue={class:"relative text-slate-500"},pe={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},fe={class:"relative text-slate-500"},_e={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},xe={class:"relative text-slate-500"},be={class:"mt-3 w-full sm:ml-auto sm:mt-0 sm:w-auto md:ml-0"},ve={class:"relative text-slate-500"},we={class:"intro-y col-span-12 overflow-auto lg:overflow-visible"},ye={class:"font-medium"},he={class:"font-medium"},ke={class:"font-medium"},ge={class:"font-medium"},Ce={class:"font-medium"},Se={class:"font-medium"},Ee={class:"flex items-center justify-center"},De=j({__name:"SalaryExtendPage",setup(p){const i=I(1),{salaryExtendList:f,confirmDeleteSalaryExtend:b}=le("1"),c=I(!1),r=I(-1),_=$(()=>f.value[r.value]||null),x=m=>{r.value=-1,m!==void 0&&(r.value=m),c.value=!0},v=()=>{console.log("onExportSalaryExtendClick")},y=()=>{console.log("onImportButtonClick")},E=()=>{console.log("onDownloadImportExampleClick")},T=m=>{b(i.value,m)};return(m,u)=>(V(),B("div",null,[l("div",oe,[l("div",de,[l("div",ne,[l("div",re,[t(e(S),{type:"text",class:"!box w-56 pr-10",placeholder:"Search..."}),t(e(w),{icon:"Search",class:"absolute inset-y-0 right-0 my-auto mr-3 h-4 w-4"})])])])]),l("div",ie,[l("div",ce,[l("div",me,[l("div",ue,[t(e(k),{variant:"primary",type:"button",class:"m-3",onClick:u[0]||(u[0]=a=>x())},{default:s(()=>[t(e(w),{icon:"Plus",class:"mr-1 h-4 w-4"}),o(" 新增薪資加減項 ")]),_:1})])]),l("div",pe,[l("div",fe,[t(e(k),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:y},{default:s(()=>[t(e(w),{icon:"Upload",class:"mr-1 h-4 w-4"}),o(" 匯入薪資加減項 ")]),_:1})])]),l("div",_e,[l("div",xe,[t(e(k),{variant:"primary",type:"button",class:"m-3",disabled:"",onClick:v},{default:s(()=>[t(e(w),{icon:"Download",class:"mr-1 h-4 w-4"}),o(" 匯出薪資加減項 ")]),_:1})])]),l("div",be,[l("div",ve,[t(e(k),{variant:"danger",type:"button",class:"m-3",disabled:"",onClick:E},{default:s(()=>[t(e(w),{icon:"Download",class:"mr-1 h-4 w-4"}),o(" 薪資加減項匯入範例 ")]),_:1})])])]),l("div",we,[t(e(d),{class:"-mt-2 border-separate border-spacing-y-[10px]"},{default:s(()=>[t(e(d).Thead,null,{default:s(()=>[t(e(d).Tr,null,{default:s(()=>[t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o(" 員工編號 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("姓名")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o(" 薪資年月 ")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("薪資科目")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("金額")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("加減項")]),_:1}),t(e(d).Th,{class:"whitespace-nowrap border-b-0"},{default:s(()=>[o("動作")]),_:1})]),_:1})]),_:1}),t(e(d).Tbody,null,{default:s(()=>[(V(!0),B(O,null,X(e(f),(a,n)=>(V(),D(e(d).Tr,{key:n,class:"intro-x"},{default:s(()=>[t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",ye,h(a.employeeId),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",he,h(a.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",ke,h(a.yearMonth),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",ge,h(a.name),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Ce,h(a.amount),1)]),_:2},1024),t(e(d).Td,{class:"border-b-0 bg-white text-center shadow-[20px_3px_20px_#0000000b] first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600"},{default:s(()=>[l("div",Se,h(a.type),1)]),_:2},1024),t(e(d).Td,{class:"relative w-56 border-b-0 bg-white py-0 shadow-[20px_3px_20px_#0000000b] before:absolute before:inset-y-0 before:left-0 before:my-auto before:block before:h-8 before:w-px before:bg-slate-200 first:rounded-l-md last:rounded-r-md dark:bg-darkmode-600 before:dark:bg-darkmode-400"},{default:s(()=>[l("div",Ee,[t(e(k),{variant:"primary",type:"button",class:"m-3 w-20",onClick:N=>x(n)},{default:s(()=>[t(e(w),{icon:"Edit",class:"mr-1 h-4 w-4"}),o(" 修改 ")]),_:2},1032,["onClick"]),t(e(k),{variant:"danger",type:"button",class:"m-3 w-20",onClick:N=>T(a.id)},{default:s(()=>[t(e(w),{icon:"Trash",class:"mr-1 h-4 w-4"}),o(" 刪除 ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),c.value?(V(),D(e(ae),{key:0,salaryExtend:_.value,onClose:u[1]||(u[1]=a=>c.value=!1),idx:r.value},null,8,["salaryExtend","idx"])):H("",!0)]))}});export{De as default};
